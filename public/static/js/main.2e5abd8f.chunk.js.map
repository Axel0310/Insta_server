{"version":3,"sources":["api/apiHandler.js","components/Auth/UserContext.jsx","components/Auth/UserProvider.jsx","pages/WelcomePage.jsx","components/Forms/FormSignin.jsx","pages/Signin.jsx","components/Forms/FormSignup.jsx","pages/Signup.jsx","components/Auth/withUser.jsx","components/ProtectedRoute.jsx","components/ProfileActions.jsx","pages/Profile.jsx","components/Header.jsx","components/BottomNavBar.jsx","components/ImageCropping.jsx","components/ImageInput.jsx","components/Backdrop.jsx","components/Forms/ImageForm.jsx","components/Forms/FormEditProfile.jsx","components/ImageCard.jsx","pages/ImagesCarousel.jsx","components/Search.jsx","pages/Notifications.jsx","App.jsx","index.js"],"names":["service","axios","create","baseURL","process","withCredentials","errorHandler","error","response","data","console","log","userInfo","post","then","res","catch","get","imageId","userId","formInput","imgId","patch","delete","userName","inputs","connectedUserId","profileUserId","UserContext","React","createContext","UserProvider","state","user","isLoggedIn","isLoading","setUser","setState","removeUser","apiHandler","authValues","this","Provider","value","props","children","Component","WelcomePage","className","to","FormSignin","email","password","handleChange","event","target","name","handleSubmit","preventDefault","context","history","push","onSubmit","onChange","type","placeholder","contextType","withRouter","Signin","FormSignup","Signup","withUser","ComponentToPassUserContextTo","Consumer","component","rest","render","profileUser","clbkFollow","clbkSignOut","connectedUser","isFollowed","subscriptions","includes","_id","connectedUserBtns","Fragment","Button","variant","color","onClick","followBtn","match","useState","setProfileUser","setIsLoading","useEffect","params","id","fetchedUser","handleFollow","a","updatedConnectedUser","updatedProfileUser","CircularProgress","src","profilePicture","alt","images","length","followers","description","map","image","key","url","useStyles","makeStyles","root","backgroundColor","fontSize","position","left","top","transform","right","heightSizing","height","HideOnScroll","window","trigger","useScrollTrigger","undefined","Slide","appear","direction","in","Header","classes","AppBar","Toolbar","bottom","width","minWidth","profilePic","borderRadius","location","pathname","setValue","BottomNavigation","newValue","BottomNavigationAction","label","icon","Avatar","croppingToolWrapper","display","flexDirection","alignItems","marginTop","cropWrapper","paddingTop","slider","createImage","Promise","resolve","reject","Image","addEventListener","setAttribute","getCroppedImg","imageSrc","pixelCrop","canvas","document","createElement","ctx","getContext","naturalWidth","naturalHeight","drawImage","getImageData","x","y","putImageData","toBlob","file","ImageCropping","imgUrl","clbkCrop","round","crop","setCrop","zoom","setZoom","croppedAreaPixels","setCroppedAreaPixels","onCropComplete","useCallback","croppedArea","handleCropValidation","croppedImg","onCropChange","onZoomChange","aspect","cropShape","Grid","container","spacing","item","xs","Slider","min","max","step","aria-labelledby","e","input","imageInputWrapper","imageMini","hidden","btnWrapper","justifyContent","editBtn","marginLeft","ImageInput","clbkUpload","tempUrl","tempUrlCropped","isDisabled","cropToolDisplayed","setCropToolDisplayed","accept","multiple","required","htmlFor","startIcon","theme","backdrop","zIndex","drawer","SimpleBackdrop","loading","open","setOpen","Backdrop","marginBottom","formTitle","fontWeight","ImageForm","setTempUrl","setTempUrlCropped","setDescription","setImage","setLoading","mode","message","displayValidation","evt","URL","createObjectURL","files","croppedImage","TextField","multiline","rows","button","endIcon","fd","FormData","append","editProfileForm","maxWidth","alignSelf","marginRight","validateBtn","showPassword","setShowPassword","setInputs","handleInputsChange","persist","rowsMax","FormControl","InputLabel","Input","endAdornment","InputAdornment","IconButton","aria-label","onMouseDown","padding","media","expand","transition","transitions","duration","shortest","expandOpen","clbkDelete","clbkLike","creator","anchorRef","useRef","handleMenuClose","current","contains","handleListKeyDown","prevOpen","focus","handleDelete","imageActionBtn","ref","aria-controls","aria-haspopup","Popper","anchorEl","role","disablePortal","placement","TransitionProps","Grow","style","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","autoFocusItem","onKeyDown","MenuItem","imageIsFromConnectedUser","imageIsLiked","likes","reduce","isLiked","likesDisplay","Card","CardHeader","avatar","action","title","CardMedia","CardActions","disableSpacing","CardContent","Typography","setImages","fetchedImages","updatedUser","handleLike","likedImgId","updatedImage","index","findIndex","img","newImages","currentImage","searchComponent","resultDisplay","userCard","msg","loader","search","setSearch","result","setResult","fetchedUsers","noMatchMsg","elevation","margin","notifsContainer","notifWrapper","imgMini","notifDesc","notifications","setNotifications","fetchedNotifications","sort","notif1","notif2","date1","createdAt","date2","notif","exact","path","FormEditProfile","Profile","ImagesCarousel","Search","Notifications","BottomNavBar","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.2e5abd8f.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst service = axios.create({\n  baseURL: process.env.REACT_APP_BACKEND_URL,\n  withCredentials: true, // Cookie is sent to client when using this service. (used for session)\n});\n\nfunction errorHandler(error) {\n  if (error.response.data) {\n    console.log(error.response && error.response.data);\n    throw error;\n  }\n  throw error;\n}\n\nexport default {\n  service,\n\n  signup(userInfo) {\n    return service\n      .post(\"/api/auth/signup\", userInfo)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  signin(userInfo) {\n    return service\n      .post(\"/api/auth/signin\", userInfo)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  isLoggedIn() {\n    return service\n      .get(\"/api/auth/isLoggedIn\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  logout() {\n    return service\n      .get(\"/api/auth/logout\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  getImage(imageId) {\n    return service\n      .get(`/api/images/${imageId}`)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  getAllImages() {\n    return service\n      .get(\"/api/images\")\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  getProfileImages(userId) {\n    return service\n      .get(`/api/images/profile/${userId}`)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  uploadImage(formInput) {\n    return service\n      .post(`/api/images`, formInput)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  updateImage(imgId, formInput) {\n    return service\n      .patch(`/api/images/${imgId}`, formInput)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  deleteImage(imgId) {\n    return service\n      .delete(`/api/images/${imgId}`)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  toggleLike(imgId) {\n    return service\n      .patch(`/api/images/like/${imgId}`)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  getUser(userId) {\n    return service\n      .get(`/api/users/${userId}`)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  searchUser(userName) {\n    return service\n      .get(`/api/users/search/${userName}`)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  updateUser(inputs) {\n    return service\n      .patch(`/api/users`, inputs)\n      .then((res) => res.data)\n      .catch(errorHandler);\n  },\n\n  updateSubs(connectedUserId, profileUserId){\n    return service\n    .patch(\"/api/users/follow\", {connectedUserId: connectedUserId, profileUserId: profileUserId})\n    .then( res => res.data)\n    .catch(errorHandler);\n  },\n\n  getNotifications(){\n    return service\n    .get(\"/api/users/notifications\")\n    .then( res => res.data)\n    .catch(errorHandler);\n  }\n};\n","import React from \"react\";\n\nconst UserContext = React.createContext();\n\nexport default UserContext;\n","import React, { Component } from \"react\";\nimport apiHandler from \"../../api/apiHandler\";\nimport UserContext from \"./UserContext\";\n\nclass UserProvider extends Component {\n  state = {\n    user: null,\n    isLoggedIn: false,\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    apiHandler\n      .isLoggedIn()\n      .then((data) => {\n        this.setState({ user: data, isLoggedIn: true, isLoading: false });\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({ user: null, isLoggedIn: false, isLoading: false });\n      });\n  }\n\n  setUser = (user) => {\n    this.setState({ user, isLoggedIn: true });\n  };\n\n  removeUser = () => {\n    this.setState({ user: null, isLoggedIn: false });\n  };\n\n  render() {\n    //  Setup all the values/functions you want to expose to anybody reading\n    // from the AuthContext.\n    const authValues = {\n      user: this.state.user,\n      setUser: this.setUser,\n      removeUser: this.removeUser,\n      isLoggedIn: this.state.isLoggedIn,\n      isLoading: this.state.isLoading,\n    };\n\n    return (\n      <UserContext.Provider value={authValues}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default UserProvider;\n","import React from \"react\";\nimport \"../styles/welcomePage.css\";\nimport { Link } from 'react-router-dom';\n\nexport default function WelcomePage() {\n  return (\n    <div className=\"welcome-page\">\n        <div className=\"auth-menu\">\n            <Link to=\"/auth/signin\">Sign in</Link>\n            <span className=\"separator\">|</span>\n            <Link to=\"/auth/signup\">Sign up</Link>\n        </div>\n      <div className=\"intro-wrapper\">\n        <h1 className=\"title\">Pics-Art</h1>\n        <p>\n          Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima,\n          ullam?\n        </p>\n        <p>\n          Lorem ipsum dolor sit, amet consectetur adipisicing elit. Aspernatur\n          deleniti sint facilis nesciunt sapiente non tempora odit? Libero,\n          deleniti incidunt.\n        </p>\n      </div>\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\n\nimport UserContext from \"../Auth/UserContext\";\nimport { withRouter } from \"react-router-dom\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { Link } from \"react-router-dom\";\n\nclass FormSignin extends Component {\n  static contextType = UserContext;\n\n  state = {\n    email: \"\",\n    password: \"\",\n  };\n\n  handleChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    apiHandler\n      .signin(this.state)\n      .then((data) => {\n        this.context.setUser(data);\n        this.props.history.push(\"/home\");\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  render() {\n    return (\n      <form\n        className=\"profile-form\"\n        onSubmit={this.handleSubmit}\n        onChange={this.handleChange}\n      >\n        <h2 className=\"form-title\">Sign in</h2>\n        <div className=\"field\">\n          <p className=\"control has-icons-left has-icons-right\">\n            <input className=\"input\" type=\"email\" placeholder=\"Email\" name=\"email\"/>\n            <span className=\"icon is-small is-left\">\n              <i className=\"fas fa-envelope\"></i>\n            </span>\n          </p>\n        </div>\n        <div className=\"field\">\n          <p className=\"control has-icons-left\">\n            <input className=\"input\" type=\"password\" placeholder=\"Password\" name=\"password\"/>\n            <span className=\"icon is-small is-left\">\n              <i className=\"fas fa-lock\"></i>\n            </span>\n          </p>\n        </div>\n        <div className=\"field\">\n          <p className=\"control\">\n            <button className=\"button\">Validate</button>\n          </p>\n        </div>\n        <p>Don't have an account yet ? <Link to=\"/auth/signup\">Sign up</Link> </p>\n      </form>\n    );\n  }\n}\n\nexport default withRouter(FormSignin);\n","import React from \"react\";\nimport FormSignin from \"../components/Forms/FormSignin\";\n\nconst Signin = (props) => {\n  return (\n    <div className=\"welcome-page\">\n    <h1 className=\"title\">Pics-art</h1>\n      <FormSignin />\n    </div>\n  );\n};\n\nexport default Signin;\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport UserContext from \"../Auth/UserContext\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { Link } from \"react-router-dom\";\nimport \"../../styles/authForm.css\";\n\nclass FormSignup extends Component {\n  static contextType = UserContext;\n\n  state = {\n    name: \"\",\n    email: \"\",\n    password: \"\",\n  };\n\n  handleChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    apiHandler\n      .signup(this.state)\n      .then((data) => {\n        this.context.setUser(data);\n        this.props.history.push(\"/home\");\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  render() {\n    return (\n      <form\n        className=\"profile-form\"\n        onSubmit={this.handleSubmit}\n        onChange={this.handleChange}\n      >\n        <h2 className=\"form-title\">Sign up</h2>\n        <div className=\"field\">\n          <p className=\"control has-icons-left has-icons-right\">\n            <input className=\"input\" type=\"text\" placeholder=\"Name\" name=\"name\"/>\n            <span className=\"icon is-small is-left\">\n              <i className=\"fas fa-user\"></i>\n            </span>\n          </p>\n        </div>\n        <div className=\"field\">\n          <p className=\"control has-icons-left has-icons-right\">\n            <input className=\"input\" type=\"email\" placeholder=\"Email\" name=\"email\"/>\n            <span className=\"icon is-small is-left\">\n              <i className=\"fas fa-envelope\"></i>\n            </span>\n          </p>\n        </div>\n        <div className=\"field\">\n          <p className=\"control has-icons-left\">\n            <input className=\"input\" type=\"password\" placeholder=\"Password\" name=\"password\"/>\n            <span className=\"icon is-small is-left\">\n              <i className=\"fas fa-lock\"></i>\n            </span>\n          </p>\n        </div>\n        <div className=\"field\">\n          <p className=\"control\">\n            <button className=\"button\">Validate</button>\n          </p>\n        </div>\n        <p>Already have an account ? <Link to=\"/auth/signin\">Sign in</Link> </p>\n      </form>\n    );\n  }\n}\n\nexport default withRouter(FormSignup);\n","import React from \"react\";\nimport FormSignup from \"../components/Forms/FormSignup\";\n\nconst Signup = (props) => {\n  return (\n    <div className=\"welcome-page\">\n    <h1 className=\"title\">Pics-art</h1>\n      <FormSignup />\n    </div>\n  );\n};\n\nexport default Signup;\n","import React from \"react\";\nimport UserContext from \"./UserContext\";\n\n// This is what we call a HOC (Higher Order Component).\n// It takes a component as a parameter and it returns a component.\n// This technique can be used to abstract some logic in order to pass\n// some data down as props to the component sent as parameter.\n\n// The use case of this one is to make it easy to access the user context to\n// any component in our app.\n\n/* ******************************************************** */\n\n//  How to use:  =>\n// YourComponent.jsx\n// import React from \"react\"\n// function or class YourComponent()\n//\n// ... your implementation.\n//\n// export default withUser(YourComponent)\n// ----------------^ your component now has access to the user context defined in UserProvider.jsx.\n\nexport const withUser = (ComponentToPassUserContextTo) => {\n\n  return function (props) {\n    return (\n      <UserContext.Consumer>\n        {(context) => (\n          <ComponentToPassUserContextTo {...props} context={context} />\n        )}\n      </UserContext.Consumer>\n    );\n  };\n};\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { withUser } from \"../components/Auth/withUser\";\n\nconst ProtectedRoute = ({ component: Component, context, ...rest }) => {\n  if (context.isLoading) {\n    return null;\n  } else if (context.isLoggedIn) {\n    return <Route {...rest} render={(props) => <Component {...props} />} />;\n  } else {\n    return <Redirect to=\"/auth/signin\" />;\n  }\n};\n\nexport default withUser(ProtectedRoute);\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { withUser } from \"../components/Auth/withUser\";\nimport { Link } from \"react-router-dom\";\nimport \"../api/apiHandler\";\nimport apiHandler from \"../api/apiHandler\";\n//css is included in profile.css\n\nfunction ProfileActions({ profileUser, context, clbkFollow, clbkSignOut }) {\n  const connectedUser = context.user;\n  // console.log(connectedUser)\n  const isFollowed = connectedUser.subscriptions.includes(profileUser._id);\n\n  // const isFollowed = profileUser.followers.includes(connectedUser._id)\n\n  const handleClick = () => {\n    clbkFollow();\n  };\n\n  const connectedUserBtns = (\n    <React.Fragment>\n      <Link to=\"/profile/edit\">\n        <Button variant=\"contained\" color=\"primary\">\n          Edit profile\n        </Button>\n      </Link>\n\n      <Button variant=\"outlined\" color=\"primary\" onClick={clbkSignOut}>\n        Sign out\n      </Button>\n    </React.Fragment>\n  );\n\n  const followBtn = (\n    <Button variant=\"contained\" color=\"primary\" onClick={handleClick}>\n      {isFollowed ? \"Unfollow\" : \"Follow\"}\n    </Button>\n  );\n\n  return (\n    <div className=\"user-actions\">\n      {profileUser._id === connectedUser._id ? connectedUserBtns : followBtn}\n    </div>\n  );\n}\n\nexport default withUser(ProfileActions);\n","import React, { useState, useEffect } from \"react\";\nimport apiHandler from \"../api/apiHandler\";\nimport ProfilActions from \"../components/ProfileActions\";\nimport { withUser } from \"../components/Auth/withUser\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { Link } from \"react-router-dom\";\nimport \"../styles/profile.css\";\n\nconst Profile = ({context, match, history}) => {\n  const [profileUser, setProfileUser] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n\n  const connectedUser = context.user;\n\n  useEffect(() => {\n    apiHandler.getUser(match.params.id).then((fetchedUser) => {\n      setProfileUser(fetchedUser);\n      setIsLoading(false);\n    });\n  }, [match]);\n\n  const handleFollow = async () => {\n    const { updatedConnectedUser, updatedProfileUser} = await apiHandler.updateSubs(connectedUser._id, profileUser._id);\n    setProfileUser(updatedProfileUser);\n    context.setUser(updatedConnectedUser);\n  };\n\n  const handleSignOut = () => {\n    apiHandler.logout()\n    .then( res => {\n      context.removeUser();\n      history.push(\"/\");\n    })\n    .catch( error => {\n      console.log(error)\n    })\n  }\n\n  if (isLoading) return <CircularProgress />;\n  return (\n    <React.Fragment>\n      <section className=\"user-info\">\n        <div className=\"user-info-header\">\n          <img\n            src={profileUser.profilePicture}\n            alt=\"Profile\"\n            className=\"user-picture\"\n          />\n          <div className=\"info-wrapper\">\n            <h2 className=\"user-name\">{profileUser.name}</h2>\n            <div className=\"user-figures\">\n              <p className=\"figure\">\n                <span>{profileUser.images.length}</span>{\" \"}\n                <span> publications</span>\n              </p>\n              <p className=\"figure\">\n                <span>{profileUser.followers.length}</span>\n                <span> followers</span>\n              </p>\n              <p className=\"figure\">\n                <span>{profileUser.subscriptions.length}</span>\n                <span> subscriptions</span>\n              </p>\n            </div>\n          </div>\n        </div>\n        <p className=\"user-description\">{profileUser.description}</p>\n        <ProfilActions profileUser={profileUser} clbkFollow={handleFollow} clbkSignOut={handleSignOut}/>\n      </section>\n      <section className=\"user-images\">\n        {profileUser.images.map((image) => (\n          <Link to={`/profile/images/${match.params.id}`} key={image._id}>\n          <img src={image.url} alt=\"Publication\" className=\"publication\" />\n          </Link>\n        ))}\n      </section>\n    </React.Fragment>\n  );\n};\n\nexport default withUser(Profile);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport useScrollTrigger from \"@material-ui/core/useScrollTrigger\";\nimport Slide from \"@material-ui/core/Slide\";\nimport { Link } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  root: {\n    // height: \"7vh\",\n    backgroundColor: \"rgb(132, 210, 255)\",\n    \"& .title\": {\n      fontSize: \"4em\",\n      position: \"absolute\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n    },\n    \"& .chat-link\": {\n        fontSize: \"2.5em\",\n        position: \"absolute\",\n        right: \"2%\",\n        top: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n      },\n    heightSizing:{\n        height:\"7vh\"\n    }\n  },\n});\n\nfunction HideOnScroll(props) {\n  const { children, window } = props;\n  // Note that you normally won't need to set the window ref as useScrollTrigger\n  // will default to window.\n  // This is only being set here because the demo is in an iframe.\n  const trigger = useScrollTrigger({ target: window ? window() : undefined });\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      {children}\n    </Slide>\n  );\n}\n\nHideOnScroll.propTypes = {\n  children: PropTypes.element.isRequired,\n  /**\n   * Injected by the documentation to work in an iframe.\n   * You won't need it on your project.\n   */\n  window: PropTypes.func,\n};\n\nexport default function Header(props) {\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <HideOnScroll {...props}>\n        <AppBar className={classes.root}>\n          <Toolbar>\n            <h1 className=\"title\">Pics-art</h1>\n            <Link to=\"/chat\" className=\"chat-link\">\n              <i className=\"fas fa-paper-plane\"></i>\n            </Link>\n          </Toolbar>\n        </AppBar>\n      </HideOnScroll>\n      <Toolbar/>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport BottomNavigation from \"@material-ui/core/BottomNavigation\";\nimport BottomNavigationAction from \"@material-ui/core/BottomNavigationAction\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport AddBoxIcon from \"@material-ui/icons/AddBox\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { withUser } from \"../components/Auth/withUser\";\nimport { Link } from \"react-router-dom\";\nimport { withRouter } from \"react-router-dom\";\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"sticky\",\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n    backgroundColor: \"rgb(132, 210, 255)\",\n    \"& .MuiBottomNavigationAction-root\": {\n      color: \"white\",\n      minWidth: 40,\n    },\n    \"& a:hover\": {\n      color: \"white\",\n    },\n  },\n  profilePic: {\n    borderRadius: \"50%\",\n    width: \"1.5em\",\n    height: \"1.5em\",\n  },\n});\n\nfunction LabelBottomNavigation({ context, location }) {\n  const { user } = context;\n  const { pathname } = location;\n  const classes = useStyles();\n  const [value, setValue] = React.useState(\"\");\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  useEffect(() => {\n    if (pathname === \"/home\") {\n      setValue(\"home\");\n    } else if (pathname === \"/search\") {\n      setValue(\"search\");\n    } else if (pathname === \"/image/upload\") {\n      setValue(\"upload\");\n    } else if (pathname === \"/notifications\") {\n      setValue(\"activities\");\n    } else if (\n      pathname === `/profile/${user._id}` ||\n      pathname === `/profile/edit`\n    ) {\n      setValue(\"profile\");\n    } else {\n      setValue(\"\");\n    }\n  }, [pathname]);\n\n  return (\n    <BottomNavigation\n      value={value}\n      onChange={handleChange}\n      className={classes.root}\n    >\n      <BottomNavigationAction\n        label=\"Home\"\n        value=\"home\"\n        icon={\n          <Link to=\"/home\">\n            <HomeIcon />\n          </Link>\n        }\n      />\n      <BottomNavigationAction\n        label=\"Search\"\n        value=\"search\"\n        icon={\n          <Link to=\"/search\">\n            <SearchIcon />\n          </Link>\n        }\n      />\n      <BottomNavigationAction\n        label=\"Upload\"\n        value=\"upload\"\n        icon={\n          <Link to=\"/image/upload\">\n            <AddBoxIcon />\n          </Link>\n        }\n      />\n      <BottomNavigationAction\n        label=\"Activities\"\n        value=\"activities\"\n        icon={\n          <Link to=\"/notifications\">\n            <FavoriteIcon />\n          </Link>\n        }\n      />\n      <BottomNavigationAction\n        label=\"Profile\"\n        value=\"profile\"\n        icon={\n          <Link to={`/profile/${user._id}`}>\n            <Avatar\n              alt=\"Profil\"\n              src={user.profilePicture}\n              className={classes.profilePic}\n            />\n          </Link>\n        }\n      />\n    </BottomNavigation>\n  );\n}\n\nexport default withRouter(withUser(LabelBottomNavigation));\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport Slider from \"@material-ui/core/Slider\";\nimport Grid from \"@material-ui/core/Grid\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport Cropper from \"react-easy-crop\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  croppingToolWrapper: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    marginTop: \"20px\",\n  },\n  cropWrapper: {\n    position: \"relative\",\n    width: \"100vw\",\n    height: 0,\n    paddingTop: \"75%\",\n  },\n  slider: {\n    width: \"50%\",\n    alignItems: \"center\",\n  },\n});\n\nconst createImage = (url) =>\n  new Promise((resolve, reject) => {\n    const image = new Image();\n    image.addEventListener(\"load\", () => resolve(image));\n    image.addEventListener(\"error\", (error) => reject(error));\n    image.setAttribute(\"crossOrigin\", \"anonymous\"); // needed to avoid cross-origin issues on CodeSandbox\n    image.src = url;\n  });\n\nasync function getCroppedImg(imageSrc, pixelCrop) {\n  const image = await createImage(imageSrc);\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n\n  canvas.width = image.naturalWidth;\n  canvas.height = image.naturalHeight;\n\n  ctx.drawImage(image, 0, 0);\n\n  const data = ctx.getImageData(\n    pixelCrop.x,\n    pixelCrop.y,\n    pixelCrop.width,\n    pixelCrop.height\n  );\n\n  canvas.width = pixelCrop.width;\n  canvas.height = pixelCrop.height;\n\n  ctx.putImageData(data, 0, 0);\n\n  return new Promise((resolve) => {\n    canvas.toBlob((file) => {\n      resolve(file);\n    }, \"image/jpeg\");\n  });\n}\n\nexport default function ImageCropping({ imgUrl, clbkCrop, round }) {\n  const classes = useStyles();\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\n  const [zoom, setZoom] = useState(1);\n  const [croppedAreaPixels, setCroppedAreaPixels] = useState(null);\n\n  const onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {\n    setCroppedAreaPixels(croppedAreaPixels);\n  }, []);\n\n  const handleCropValidation = async () => {\n    try {\n      const croppedImg = await getCroppedImg(imgUrl, croppedAreaPixels);\n      clbkCrop(croppedImg);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div className={classes.croppingToolWrapper}>\n      <div className={classes.cropWrapper}>\n        <Cropper\n          image={imgUrl}\n          crop={crop}\n          zoom={zoom}\n          onCropChange={setCrop}\n          onCropComplete={onCropComplete}\n          onZoomChange={setZoom}\n          aspect={round ? 1 : 4 / 3}\n          cropShape={round ? \"round\" : \"rect\"}\n        />\n      </div>\n      <Grid container spacing={2} className={classes.slider}>\n        <Grid item>\n          <ZoomOutIcon />\n        </Grid>\n        <Grid item xs>\n          <Slider\n            value={zoom}\n            min={1}\n            max={3}\n            step={0.1}\n            aria-labelledby=\"Zoom\"\n            onChange={(e, zoom) => setZoom(zoom)}\n          />\n        </Grid>\n        <Grid item>\n          <ZoomInIcon />\n        </Grid>\n      </Grid>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        component=\"span\"\n        onClick={handleCropValidation}\n      >\n        Validate image\n      </Button>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\nimport ImageCropping from \"./ImageCropping\";\nimport EditIcon from \"@material-ui/icons/Edit\";\n\nconst useStyles = makeStyles({\n  input: {\n    display: \"none\",\n  },\n  imageInputWrapper: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    width: \"100vw\"\n  },\n  imageMini: {\n    width: \"100%\",\n    marginTop: \"20px\",\n  },\n  hidden: {\n    display: \"none\",\n  },\n  btnWrapper: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"60%\",\n  },\n  editBtn: {\n    marginLeft: \"20px\",\n  }\n});\n\nexport default function ImageInput({\n  clbkUpload,\n  clbkCrop,\n  tempUrl,\n  tempUrlCropped,\n  isDisabled,\n}) {\n  const classes = useStyles();\n  const [cropToolDisplayed, setCropToolDisplayed] = useState(false);\n\n  useEffect(() => {\n    if (tempUrl !== \"\") setCropToolDisplayed(true);\n  }, [tempUrl]);\n\n  useEffect(() => {\n    if (tempUrlCropped !== \"\") setCropToolDisplayed(false);\n  }, [tempUrlCropped]);\n\n  const diplayCroppingTool = () => {\n    setCropToolDisplayed(true);\n  };\n\n  return (\n    <div className={classes.imageInputWrapper}>\n      <input\n        accept=\"image/*\"\n        className={classes.input}\n        id=\"contained-button-file\"\n        multiple\n        type=\"file\"\n        onChange={clbkUpload}\n        required\n      />\n      <div className={classes.btnWrapper}>\n        <label\n          htmlFor=\"contained-button-file\"\n          className={isDisabled ? classes.hidden : undefined}\n        >\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            component=\"span\"\n            startIcon={<CloudUploadIcon />}\n          >\n            Upload\n          </Button>\n        </label>\n        {tempUrlCropped !== \"\" &&\n          !cropToolDisplayed &&\n          tempUrlCropped !== tempUrl && (\n            <EditIcon onClick={diplayCroppingTool} className={classes.editBtn} />\n          )}\n      </div>\n      {tempUrlCropped !== \"\" && !cropToolDisplayed && (\n        <img src={tempUrlCropped} alt=\"Upload\" className={classes.imageMini} />\n      )}\n      {cropToolDisplayed && (\n        <ImageCropping imgUrl={tempUrl} clbkCrop={clbkCrop} />\n      )}\n    </div>\n  );\n}\n","import React, {useEffect} from 'react';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}));\n\nexport default function SimpleBackdrop({loading}) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  useEffect(() => {\n    if(loading === true) setOpen(true);\n    else setOpen(false);\n  }, [loading])\n\n  return (\n    <div>\n      <Backdrop className={classes.backdrop} open={open}>\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport apiHandler from \"../../api/apiHandler\";\nimport TextField from \"@material-ui/core/TextField\";\nimport ImageInput from \"../ImageInput\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport DoneIcon from \"@material-ui/icons/Done\";\nimport Backdrop from \"../Backdrop\";\n\nconst useStyles = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\",\n    marginTop: \"20px\",\n    \"& > *\": {\n      marginBottom: \"10px\",\n    },\n  },\n  formTitle: {\n    fontSize: \"1.8em\",\n    fontWeight: \"bolder\",\n  },\n});\n\nconst ImageForm = (props) => {\n  const classes = useStyles();\n\n  const [tempUrl, setTempUrl] = useState(\"\");\n  const [tempUrlCropped, setTempUrlCropped] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const mode = props.match.params.mode;\n  const imageId = props.match.params.id;\n\n  useEffect(() => {\n    if (mode === \"edit\") {\n      apiHandler\n        .getImage(imageId)\n        .then((image) => {\n          setTempUrl(image.url);\n          setTempUrlCropped(image.url);\n          setDescription(image.description);\n        })\n        .catch((error) => {\n          console.log(error.message);\n        });\n    }\n    return () => {\n      setLoading(false);\n    }\n  }, []);\n\n  const handleUpload = (evt) => {\n    setTempUrl(URL.createObjectURL(evt.target.files[0]));\n  };\n\n  const handleCropValidation = (croppedImage) => {\n    setTempUrlCropped(URL.createObjectURL(croppedImage));\n    setImage(croppedImage);\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    \n    setLoading(true);\n\n    if (mode === \"upload\") {\n      const fd = new FormData();\n      fd.append(\"description\", description);\n      fd.append(\"image\", image);\n      apiHandler\n        .uploadImage(fd)\n        .then((image) => {\n          props.history.push(\"/home\");\n        })\n        .catch((error) => {\n          console.log(error.message);\n        });\n    } else if (mode === \"edit\") {\n      apiHandler\n        .updateImage(imageId, { description: description })\n        .then((image) => {\n          props.history.push(\"/home\");\n        })\n        .catch((error) => {\n          console.log(error.message);\n        });\n    }\n  };\n\n  const displayValidation = (image !== null || mode === \"edit\");\n\n  return (\n    <React.Fragment>\n      {loading && <Backdrop loading={loading} />}\n      <form className={classes.root}>\n        <h2 className={classes.formTitle}>\n          {mode === \"upload\" ? \"Upload an image\" : \"Edit image\"}\n        </h2>\n        <ImageInput\n          tempUrl={tempUrl}\n          tempUrlCropped={tempUrlCropped}\n          clbkUpload={handleUpload}\n          clbkCrop={handleCropValidation}\n          isDisabled={mode === \"edit\"}\n        />\n        {displayValidation && (\n          <React.Fragment>\n            <TextField\n              id=\"outlined-multiline-static\"\n              label=\"Description\"\n              multiline\n              rows={4}\n              variant=\"outlined\"\n              value={description}\n              onChange={(evt) => setDescription(evt.target.value)}\n            />\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.button}\n              endIcon={<DoneIcon />}\n              onClick={handleSubmit}\n            >\n              Validate\n            </Button>\n          </React.Fragment>\n        )}\n      </form>\n    </React.Fragment>\n  );\n};\n\nexport default ImageForm;\n","import React, { useState, useEffect } from \"react\";\nimport apiHandler from \"../../api/apiHandler\";\nimport { withUser } from \"../../components/Auth/withUser\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ImageCropping from \"../ImageCropping\";\nimport Backdrop from \"../Backdrop\";\n\nconst useStyles = makeStyles((theme) => ({\n  input: {\n    display: \"none\",\n  },\n  editProfileForm: {\n    width: \"80%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    maxWidth: \"500px\",\n    marginTop: \"20px\",\n    \"& > *\": {\n      marginBottom: \"10px\",\n    },\n  },\n  formTitle: {\n    alignSelf: \"center\",\n    fontSize: \"1.8em\",\n    fontWeight: \"bolder\",\n  },\n  imageInputWrapper: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  imageMini: {\n    width: \"20vw\",\n    maxWidth: \"120ox\",\n    borderRadius: \"50%\",\n    marginRight: \"20px\",\n  },\n  validateBtn: {\n    width: \"50%\",\n    alignSelf: \"center\",\n  },\n}));\n\nfunction FormEditProfile({ context, history }) {\n  const classes = useStyles();\n  const [showPassword, setShowPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [inputs, setInputs] = useState({});\n  const [tempUrl, setTempUrl] = useState(\"\");\n  const [tempUrlCropped, setTempUrlCropped] = useState(\"\");\n  const [cropToolDisplayed, setCropToolDisplayed] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const { user, setUser } = context;\n\n  useEffect(() => {\n    apiHandler.getUser(user._id).then((user) => {\n      const { name, description, email, profilePicture } = user;\n      setInputs({ name, description, email });\n      setTempUrl(profilePicture);\n      setIsLoading(false);\n    });\n    return () => {\n      setLoading(false);\n    };\n  }, []);\n\n  const handleInputsChange = (evt) => {\n    evt.persist();\n    setInputs((inputs) => ({ ...inputs, [evt.target.name]: evt.target.value }));\n  };\n\n  const handleSubmit = async (evt) => {\n    evt.preventDefault();\n\n    setLoading(true);\n\n    const fd = new FormData();\n    for (let key in inputs) {\n      if (inputs[key] !== user[key]) {\n        fd.append(key, inputs[key]);\n      }\n    }\n\n    const res = await apiHandler.updateUser(fd);\n    if (!res.message) {\n      setUser(res);\n      history.push(`/profile/${user._id}`);\n    }\n  };\n\n  const handleClickShowPassword = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n  const handleCropValidation = (croppedImage) => {\n    setTempUrl(URL.createObjectURL(croppedImage));\n    setInputs((inputs) => ({ ...inputs, profilePicture: croppedImage }));\n    setCropToolDisplayed(false);\n  };\n\n  const handleUpload = (event) => {\n    setTempUrlCropped(URL.createObjectURL(event.target.files[0]));\n    setCropToolDisplayed(true);\n  };\n\n  if (isLoading) return <CircularProgress />;\n  return (\n    <React.Fragment>\n      {loading && <Backdrop loading={loading} />}\n      <form className={classes.editProfileForm}>\n        <h2 className={classes.formTitle}>Edit profile</h2>\n\n        <div className={classes.imageInputWrapper}>\n          <img src={tempUrl} alt=\"Profile\" className={classes.imageMini} />\n          <input\n            accept=\"image/*\"\n            className={classes.input}\n            id=\"contained-button-file\"\n            multiple\n            type=\"file\"\n            name=\"profilePicture\"\n            onChange={handleUpload}\n          />\n          <label htmlFor=\"contained-button-file\">\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              component=\"span\"\n              startIcon={<CloudUploadIcon />}\n            >\n              Edit picture\n            </Button>\n          </label>\n        </div>\n\n        {cropToolDisplayed && (\n          <ImageCropping\n            imgUrl={tempUrlCropped}\n            clbkCrop={handleCropValidation}\n            round={true}\n          />\n        )}\n\n        <TextField\n          required\n          label=\"Name\"\n          name=\"name\"\n          onChange={handleInputsChange}\n          value={inputs.name}\n        />\n\n        <TextField\n          id=\"outlined-multiline-static\"\n          label=\"Description\"\n          multiline\n          rowsMax={4}\n          name=\"description\"\n          onChange={handleInputsChange}\n          value={inputs.description}\n        />\n\n        <TextField\n          required\n          label=\"Email\"\n          name=\"email\"\n          onChange={handleInputsChange}\n          value={inputs.email}\n        />\n\n        <FormControl>\n          <InputLabel htmlFor=\"password\">New Password</InputLabel>\n          <Input\n            onChange={handleInputsChange}\n            name=\"password\"\n            required\n            id=\"password\"\n            type={showPassword ? \"text\" : \"password\"}\n            value={inputs.password}\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle password visibility\"\n                  onClick={handleClickShowPassword}\n                  onMouseDown={handleMouseDownPassword}\n                >\n                  {showPassword ? <Visibility /> : <VisibilityOff />}\n                </IconButton>\n              </InputAdornment>\n            }\n          />\n        </FormControl>\n\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={handleSubmit}\n          className={classes.validateBtn}\n        >\n          Validate\n        </Button>\n      </form>\n    </React.Fragment>\n  );\n}\n\nexport default withUser(FormEditProfile);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\nimport ShareIcon from \"@material-ui/icons/Share\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport { withUser } from \"../components/Auth/withUser\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 500,\n    \"& .MuiCardActions-root\": {\n      padding: 0,\n    },\n    \"& .MuiCardContent-root\": {\n      paddingTop: 0,\n    },\n  },\n  media: {\n    height: 0,\n    paddingTop: \"75%\",\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\",\n  },\n}));\n\nfunction ImageCard({ image, context, clbkDelete, clbkLike }) {\n  const { creator, description, url } = image;\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const [open, setOpen] = React.useState(false);\n  const anchorRef = React.useRef(null);\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const handleMenuToggle = () => {\n    setOpen((prevOpen) => !prevOpen);\n  };\n\n  const handleMenuClose = (event) => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === \"Tab\") {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  // return focus to the button when we transitioned from !open -> open\n  const prevOpen = React.useRef(open);\n  React.useEffect(() => {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n\n  const handleDelete = () => {\n    clbkDelete(image._id);\n  };\n\n  const handleLike = () => {\n    clbkLike(image._id);\n  };\n\n  const imageActionBtn = (\n    <React.Fragment>\n      <IconButton\n        ref={anchorRef}\n        aria-controls={open ? \"menu-list-grow\" : undefined}\n        aria-haspopup=\"true\"\n        onClick={handleMenuToggle}\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <Popper\n        open={open}\n        anchorEl={anchorRef.current}\n        role={undefined}\n        transition\n        disablePortal\n        placement=\"bottom-end\"\n      >\n        {({ TransitionProps, placement }) => (\n          <Grow\n            {...TransitionProps}\n            style={{\n              transformOrigin:\n                placement === \"bottom\" ? \"center top\" : \"center bottom\",\n            }}\n          >\n            <Paper>\n              <ClickAwayListener onClickAway={handleMenuClose}>\n                <MenuList\n                  autoFocusItem={open}\n                  id=\"menu-list-grow\"\n                  onKeyDown={handleListKeyDown}\n                >\n                  <MenuItem onClick={handleMenuClose}>\n                    <Link to={`/image/edit/${image._id}`}>Edit</Link>\n                  </MenuItem>\n                  <MenuItem onClick={handleDelete}>Delete</MenuItem>\n                </MenuList>\n              </ClickAwayListener>\n            </Paper>\n          </Grow>\n        )}\n      </Popper>\n    </React.Fragment>\n  );\n\n  const imageIsFromConnectedUser = context.user.images.includes(image._id);\n  // const imageIsLiked = image.likes.includes(context.user._id);\n  const imageIsLiked = image.likes.reduce((isLiked, user) => {\n    if (user._id == context.user._id) return true;\n    else return isLiked;\n  }, false);\n  let likesDisplay = \"Liked by \";\n\n  if (image.likes.length !== 0) {\n    if (image.likes.length === 1) {\n      likesDisplay += `${image.likes[0].name}`;\n    } else if (image.likes.length === 2) {\n      likesDisplay += `${image.likes[0].name} and ${image.likes[1].name}`;\n    } else {\n      likesDisplay += `${image.likes[0].name}, ${image.likes[1].name} and ${\n        image.likes.length - 2\n      } other${image.likes.length - 2 > 1 ? \"s\" : \"\"}`;\n    }\n  }\n\n  return (\n    <Card className={classes.root}>\n      <CardHeader\n        avatar={\n          <Link to={`/profile/${creator._id}`}>\n            <Avatar src={creator.profilePicture} />\n          </Link>\n        }\n        action={imageIsFromConnectedUser && imageActionBtn}\n        title={<Link to={`/profile/${creator._id}`}>{creator.name}</Link>}\n      />\n      <CardMedia className={classes.media} image={url} />\n      <CardActions disableSpacing>\n        <IconButton aria-label=\"add to favorites\" onClick={handleLike}>\n          {imageIsLiked ? <FavoriteIcon /> : <FavoriteBorderIcon />}\n        </IconButton>\n        {image.likes.length !== 0 && <p>{likesDisplay}</p>}\n      </CardActions>\n      <CardContent>\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n          {description}\n        </Typography>\n      </CardContent>\n\n      {/* Uncomment to implement display of image comments */}\n\n      {/* <IconButton\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={handleExpandClick}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <ExpandMoreIcon />\n        </IconButton>\n      < */}\n\n      {/* <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        \n      </Collapse> */}\n    </Card>\n  );\n}\n\nexport default withUser(ImageCard);\n","import React, { useState, useEffect } from \"react\";\nimport apiHandler from \"../api/apiHandler\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport ImageCard from \"../components/ImageCard\";\nimport { withUser } from \"../components/Auth/withUser\";\n\nfunction ImagesCarousel({ match, context }) {\n  const [images, setImages] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (match.params.mode === \"home\") {\n      apiHandler.getAllImages().then((fetchedImages) => {\n        setImages(fetchedImages);\n        setIsLoading(false);\n      });\n    } else if (match.params.mode === \"profile\") {\n      apiHandler.getProfileImages(match.params.id).then((fetchedImages) => {\n        setImages(fetchedImages);\n        setIsLoading(false);\n      });\n    }\n  }, [match, context.user]);\n\n  const handleDelete = async (imgId) => {\n    const updatedUser = await apiHandler.deleteImage(imgId);\n    context.setUser(updatedUser);\n  };\n\n  const handleLike = async (likedImgId) => {\n    const updatedImage = await apiHandler.toggleLike(likedImgId);\n    setImages(images => {\n        const index = images.findIndex( img => img._id === likedImgId);\n        const newImages = [...images];\n        newImages[index] = updatedImage;\n        return newImages;\n    })\n  };\n\n  if (isLoading) return <CircularProgress />;\n  return (\n    <React.Fragment>\n      {images.map((currentImage) => (\n        <ImageCard\n          key={currentImage._id}\n          image={currentImage}\n          clbkDelete={handleDelete}\n          clbkLike={handleLike}\n        />\n      ))}\n    </React.Fragment>\n  );\n}\n\nexport default withUser(ImagesCarousel);\n","import React, { useState, useEffect } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport apiHandler from \"../api/apiHandler\";\nimport { withUser } from \"./Auth/withUser\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { Link } from \"react-router-dom\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst useStyles = makeStyles((theme) => ({\n  searchComponent: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    marginTop: \"20px\",\n    \"& .MuiGrid-container\": {\n      width: \"auto\",\n      alignItems: \"center\"\n    },\n  },\n  resultDisplay: {\n    marginTop: \"15px\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  userCard: {\n    display: \"flex\",\n    alignItems: \"center\",\n    marginTop: \"5px\",\n    width: \"100%\",\n    backgroundColor: \"#fffef0\",\n    padding: \"5px\",\n    fontSize: \"1.7em\",\n    \"& i\": {\n        fontSize: \"0.8em\"\n    }\n  },\n  profilePicture: {\n    width: \"4em\",\n    maxWidth: \"100px\",\n    marginRight: \"10px\",\n    borderRadius: \"50%\"\n  },\n  msg:{\n      alignSelf: \"center\",\n      fontSize: \"1.5em\",\n      fontWeight: \"bolder\",\n  },\n  loader: {\n      alignSelf: \"center\"\n  }\n}));\n\nfunction Search({ context }) {\n  const classes = useStyles();\n\n  const [search, setSearch] = useState(\"\");\n  const [result, setResult] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (search !== \"\") {\n        setLoading(true)\n      apiHandler.searchUser(search).then((fetchedUsers) => {\n        setResult(fetchedUsers);\n        setLoading(false);\n      });\n    }\n  }, [search]);\n\n  const handleSearch = (event) => {\n    setSearch(event.target.value);\n  };\n\n  const userCard = (user) => {\n    return (\n      <Link to={`/profile/${user._id}`}>\n        <Paper elevation={3} className={classes.userCard}>\n          <img\n            src={user.profilePicture}\n            alt=\"User\"\n            className={classes.profilePicture}\n          />\n          <p>\n            <b>{user.name}</b>{\" \"}\n            {context.user.subscriptions.includes(user._id) ? (\n              <i> • Followed</i>\n            ) : undefined}\n          </p>\n        </Paper>\n      </Link>\n    );\n  };\n\n  const noMatchMsg = <p className={classes.msg}>No profile matches your search</p>\n\n  return (\n    <div className={classes.searchComponent}>\n      <Grid container alignItems=\"flex-end\">\n        <Grid item>\n          <SearchIcon />\n        </Grid>\n        <Grid item>\n          <TextField\n            variant=\"outlined\"\n            label=\"Search for a profile\"\n            onChange={handleSearch}\n          />\n        </Grid>\n      </Grid>\n      <section className={classes.resultDisplay}>\n        {loading ? <CircularProgress className={classes.loader}/> : search === \"\"\n          ? undefined\n          : result.length === 0\n          ? noMatchMsg\n          : result.map((user) => userCard(user))}\n      </section>\n    </div>\n  );\n}\n\nexport default withUser(Search);\n","import React, { useState, useEffect } from \"react\";\nimport { withUser } from \"../components/Auth/withUser\";\nimport apiHandler from \"../api/apiHandler\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  title: {\n    margin: \"10px auto\",\n    fontSize: \"2em\",\n    fontWeight: \"bolder\",\n  },\n  notifsContainer: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  notifWrapper: {\n    display: \"flex\",\n    width: \"100%\",\n    alignItems: \"center\",\n    marginBottom: \"5px\",\n    backgroundColor: \"#fffef0\",\n  },\n  imgMini: {\n    width: \"5em\",\n    maxWidth: \"100px\",\n    margin: \"5px 10px\",\n  },\n  notifDesc: {\n    fontWeight: \"bold\",\n  },\n});\n\nfunction Notifications() {\n  const classes = useStyles();\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    apiHandler.getNotifications().then((fetchedNotifications) => {\n      setNotifications(fetchedNotifications);\n      setLoading(false);\n    });\n  }, []);\n\n  const compareDates = (date1, date2) => {\n    if (date1 > date2) return -1;\n    else if (date1 < date2) return 1;\n    else return 0;\n  };\n\n  if (loading) return <CircularProgress />;\n  return (\n    <React.Fragment>\n      <h2 className={classes.title}>Notifications</h2>\n      <div className={classes.notifsContainer}>\n        {notifications.length === 0 ? (\n          <p>You have no notifications yet</p>\n        ) : (\n          notifications\n            .sort((notif1, notif2) =>\n              compareDates(notif1.createdAt, notif2.createdAt)\n            )\n            .map((notif) => (\n              <Paper key={notif._id} className={classes.notifWrapper}>\n                <img\n                  src={notif.image.url}\n                  alt=\"Notif\"\n                  className={classes.imgMini}\n                />\n                <p className={classes.notifDesc}>\n                  {notif.user.name} {notif.event} your picture\n                </p>\n              </Paper>\n            ))\n        )}\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default withUser(Notifications);\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport WelcomePage from \"./pages/WelcomePage\";\nimport Signin from \"./pages/Signin\";\nimport Signup from \"./pages/Signup\";\nimport ProtectedRoute from \"./components/ProtectedRoute\";\nimport Profile from \"./pages/Profile\";\nimport Header from \"./components/Header\";\nimport BottomNavBar from \"./components/BottomNavBar\";\nimport ImageForm from \"./components/Forms/ImageForm\";\nimport FormEditProfile from \"./components/Forms/FormEditProfile\";\nimport ImagesCarousel from \"./pages/ImagesCarousel\";\nimport { withUser } from \"./components/Auth/withUser\";\nimport Search from \"./components/Search\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport Notifications from \"./pages/Notifications\";\n\nfunction App(props) {\n  // const [displayMsg, setDisplayMsg] = React.useState(false);\n\n  const { user } = props.context;\n\n  // const Alert = (props) => {\n  //   return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n  // };\n\n  // const handleClose = (event, reason) => {\n  //   if (reason === \"clickaway\") {\n  //     return;\n  //   }\n\n  //   setDisplayMsg(false);\n  // };\n\n  // const FeedbackMsg = () => (\n  //   <Snackbar open={displayMsg} autoHideDuration={4000} onClose={handleClose}>\n  //     <Alert onClose={handleClose} severity=\"success\">\n  //       This is a success message!\n  //     </Alert>\n  //   </Snackbar>\n  // );\n\n  // const handleDisplayMsg = () => {\n  //   setDisplayMsg(true);\n  // }\n\n  return (\n    <React.Fragment>\n      {user && <Header />}\n      <main id=\"content\">\n        <Switch>\n          <Route exact path=\"/\" component={WelcomePage} />\n          <Route exact path=\"/auth/signin\" component={Signin} />\n          <Route exact path=\"/auth/signup\" component={Signup} />\n          <ProtectedRoute\n            exact\n            path=\"/image/:mode(upload|edit)/:id?\"\n            component={ImageForm}\n          />\n          <ProtectedRoute\n            exact\n            path=\"/profile/edit\"\n            component={FormEditProfile}\n          />\n          <ProtectedRoute exact path=\"/profile/:id\" component={Profile} />\n          <ProtectedRoute\n            exact\n            path=\"/:mode(home|profile)/:images?/:id?\"\n            component={ImagesCarousel}\n          />\n          <ProtectedRoute exact path=\"/search\" component={Search} />\n          <ProtectedRoute exact path=\"/notifications\" component={Notifications} />\n        </Switch>\n      </main>\n      {user && <BottomNavBar />}\n      {/* <FeedbackMsg /> */}\n    </React.Fragment>\n  );\n}\n\nexport default withUser(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport UserProvider from \"./components/Auth/UserProvider\";\nimport App from \"./App\";\n\nimport \"./styles/base.css\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <UserProvider>\n      <App />\n    </UserProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}