(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,a){e.exports=a(155)},145:function(e,t,a){},150:function(e,t,a){},152:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),i=a.n(c),l=a(10),o=a(42),s=a(43),u=a(47),m=a(46),p=a(93),f=a.n(p).a.create({baseURL:"https://pics-4rt.herokuapp.com",withCredentials:!0});function d(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var h=function(e){return f.post("/api/auth/signup",e).then((function(e){return e.data})).catch(d)},g=function(e){return f.post("/api/auth/signin",e).then((function(e){return e.data})).catch(d)},E=function(){return f.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(d)},b=function(){return f.get("/api/auth/logout").then((function(e){return e.data})).catch(d)},v=function(e){return f.get("/api/images/".concat(e)).then((function(e){return e.data})).catch(d)},O=function(){return f.get("/api/images").then((function(e){return e.data})).catch(d)},j=function(e){return f.get("/api/images/profile/".concat(e)).then((function(e){return e.data})).catch(d)},N=function(e){return f.post("/api/images",e).then((function(e){return e.data})).catch(d)},x=function(e,t){return f.patch("/api/images/".concat(e),t).then((function(e){return e.data})).catch(d)},w=function(e){return f.delete("/api/images/".concat(e)).then((function(e){return e.data})).catch(d)},y=function(e){return f.patch("/api/images/like/".concat(e)).then((function(e){return e.data})).catch(d)},k=function(e){return f.get("/api/users/".concat(e)).then((function(e){return e.data})).catch(d)},S=function(e){return f.get("/api/users/search/".concat(e)).then((function(e){return e.data})).catch(d)},C=function(e){return f.patch("/api/users",e).then((function(e){return e.data})).catch(d)},U=function(e,t){return f.patch("/api/users/follow",{connectedUserId:e,profileUserId:t}).then((function(e){return e.data})).catch(d)},I=function(){return f.get("/api/users/notifications").then((function(e){return e.data})).catch(d)},L=r.a.createContext(),D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;E().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){console.log(t),e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return r.a.createElement(L.Provider,{value:e},this.props.children)}}]),a}(n.Component),P=a(15);a(145);function W(){return r.a.createElement("div",{className:"welcome-page"},r.a.createElement("div",{className:"auth-menu"},r.a.createElement(l.b,{to:"/auth/signin"},"Sign in"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement(l.b,{to:"/auth/signup"},"Sign up")),r.a.createElement("div",{className:"intro-wrapper"},r.a.createElement("h1",{className:"title"},"Pics-Art"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima, ullam?"),r.a.createElement("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Aspernatur deleniti sint facilis nesciunt sapiente non tempora odit? Libero, deleniti incidunt.")))}var _=a(36),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),g(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/home")})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:"profile-form",onSubmit:this.handleSubmit,onChange:this.handleChange},r.a.createElement("h2",{className:"form-title"},"Sign in"),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email",name:"email"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button"},"Validate"))),r.a.createElement("p",null,"Don't have an account yet ? ",r.a.createElement(l.b,{to:"/auth/signup"},"Sign up")," "))}}]),a}(n.Component);F.contextType=L;var T=Object(P.g)(F),R=function(e){return r.a.createElement("div",{className:"welcome-page"},r.a.createElement("h1",{className:"title"},"Pics-art"),r.a.createElement(T,null))},A=(a(150),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",password:""},e.handleChange=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),h(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/home")})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:"profile-form",onSubmit:this.handleSubmit,onChange:this.handleChange},r.a.createElement("h2",{className:"form-title"},"Sign up"),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Name",name:"name"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-user"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email",name:"email"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button"},"Validate"))),r.a.createElement("p",null,"Already have an account ? ",r.a.createElement(l.b,{to:"/auth/signin"},"Sign in")," "))}}]),a}(n.Component));A.contextType=L;var M=Object(P.g)(A),z=function(e){return r.a.createElement("div",{className:"welcome-page"},r.a.createElement("h1",{className:"title"},"Pics-art"),r.a.createElement(M,null))},B=a(106),V=function(e){return function(t){return r.a.createElement(L.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},q=V((function(e){var t=e.component,a=e.context,n=Object(B.a)(e,["component","context"]);return a.isLoading?null:a.isLoggedIn?r.a.createElement(P.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(P.a,{to:"/auth/signin"})})),H=a(17),J=a.n(H),Z=a(31),G=a(6),K=a(204);var Y=V((function(e){var t=e.profileUser,a=e.context,n=e.clbkFollow,c=e.clbkSignOut,i=a.user,o=i.subscriptions.includes(t._id),s=r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/profile/edit"},r.a.createElement(K.a,{variant:"contained",color:"primary"},"Edit profile")),r.a.createElement(K.a,{variant:"outlined",color:"primary",onClick:c},"Sign out")),u=r.a.createElement(K.a,{variant:"contained",color:"primary",onClick:function(){n()}},o?"Unfollow":"Follow");return r.a.createElement("div",{className:"user-actions"},t._id===i._id?s:u)})),Q=a(208),X=(a(152),V((function(e){var t=e.context,a=e.match,c=e.history,i=Object(n.useState)({}),o=Object(G.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(!0),p=Object(G.a)(m,2),f=p[0],d=p[1],h=t.user;Object(n.useEffect)((function(){k(a.params.id).then((function(e){u(e),d(!1)}))}),[a]);var g=function(){var e=Object(Z.a)(J.a.mark((function e(){var a,n,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(h._id,s._id);case 2:a=e.sent,n=a.updatedConnectedUser,r=a.updatedProfileUser,u(r),t.setUser(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f?r.a.createElement(Q.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"user-info"},r.a.createElement("div",{className:"user-info-header"},r.a.createElement("img",{src:s.profilePicture,alt:"Profile",className:"user-picture"}),r.a.createElement("div",{className:"info-wrapper"},r.a.createElement("h2",{className:"user-name"},s.name),r.a.createElement("div",{className:"user-figures"},r.a.createElement("p",{className:"figure"},r.a.createElement("span",null,s.images.length)," ",r.a.createElement("span",null," publications")),r.a.createElement("p",{className:"figure"},r.a.createElement("span",null,s.followers.length),r.a.createElement("span",null," followers")),r.a.createElement("p",{className:"figure"},r.a.createElement("span",null,s.subscriptions.length),r.a.createElement("span",null," subscriptions"))))),r.a.createElement("p",{className:"user-description"},s.description),r.a.createElement(Y,{profileUser:s,clbkFollow:g,clbkSignOut:function(){b().then((function(e){t.removeUser(),c.push("/")})).catch((function(e){console.log(e)}))}})),r.a.createElement("section",{className:"user-images"},s.images.map((function(e){return r.a.createElement(l.b,{to:"/profile/images/".concat(a.params.id),key:e._id},r.a.createElement("img",{src:e.url,alt:"Publication",className:"publication"}))}))))}))),$=a(212),ee=a(213),te=a(210),ae=a(211),ne=a(209),re=Object(ne.a)({root:{backgroundColor:"rgb(132, 210, 255)","& .title":{fontSize:"4em",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},"& .chat-link":{fontSize:"2.5em",position:"absolute",right:"2%",top:"50%",transform:"translate(-50%, -50%)"},heightSizing:{height:"7vh"}}});function ce(e){var t=e.children,a=e.window,n=Object(te.a)({target:a?a():void 0});return r.a.createElement(ae.a,{appear:!1,direction:"down",in:!n},t)}function ie(e){var t=re();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,e,r.a.createElement($.a,{className:t.root},r.a.createElement(ee.a,null,r.a.createElement("h1",{className:"title"},"Pics-art"),r.a.createElement(l.b,{to:"/chat",className:"chat-link"},r.a.createElement("i",{className:"fas fa-paper-plane"}))))),r.a.createElement(ee.a,null))}var le=a(214),oe=a(215),se=a(94),ue=a.n(se),me=a(68),pe=a.n(me),fe=a(67),de=a.n(fe),he=a(95),ge=a.n(he),Ee=a(230),be=Object(ne.a)({root:{position:"sticky",bottom:0,left:0,width:"100%",backgroundColor:"rgb(132, 210, 255)","& .MuiBottomNavigationAction-root":{color:"white",minWidth:40},"& a:hover":{color:"white"}},profilePic:{borderRadius:"50%",width:"1.5em",height:"1.5em"}});var ve=Object(P.g)(V((function(e){var t=e.context,a=e.location,c=t.user,i=a.pathname,o=be(),s=r.a.useState(""),u=Object(G.a)(s,2),m=u[0],p=u[1];return Object(n.useEffect)((function(){"/home"===i?p("home"):"/search"===i?p("search"):"/image/upload"===i?p("upload"):"/notifications"===i?p("activities"):i==="/profile/".concat(c._id)||"/profile/edit"===i?p("profile"):p("")}),[i]),r.a.createElement(le.a,{value:m,onChange:function(e,t){p(t)},className:o.root},r.a.createElement(oe.a,{label:"Home",value:"home",icon:r.a.createElement(l.b,{to:"/home"},r.a.createElement(ue.a,null))}),r.a.createElement(oe.a,{label:"Search",value:"search",icon:r.a.createElement(l.b,{to:"/search"},r.a.createElement(de.a,null))}),r.a.createElement(oe.a,{label:"Upload",value:"upload",icon:r.a.createElement(l.b,{to:"/image/upload"},r.a.createElement(ge.a,null))}),r.a.createElement(oe.a,{label:"Activities",value:"activities",icon:r.a.createElement(l.b,{to:"/notifications"},r.a.createElement(pe.a,null))}),r.a.createElement(oe.a,{label:"Profile",value:"profile",icon:r.a.createElement(l.b,{to:"/profile/".concat(c._id)},r.a.createElement(Ee.a,{alt:"Profil",src:c.profilePicture,className:o.profilePic}))}))}))),Oe=a(229),je=a(71),Ne=a.n(je),xe=a(232),we=a(216),ye=a(96),ke=a.n(ye),Se=a(97),Ce=a.n(Se),Ue=a(107),Ie=Object(ne.a)({croppingToolWrapper:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"20px"},cropWrapper:{position:"relative",width:"100vw",height:0,paddingTop:"75%"},slider:{width:"50%",alignItems:"center"}}),Le=function(e){return new Promise((function(t,a){var n=new Image;n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(e){return a(e)})),n.setAttribute("crossOrigin","anonymous"),n.src=e}))};function De(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(Z.a)(J.a.mark((function e(t,a){var n,r,c,i;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(t);case 2:return n=e.sent,r=document.createElement("canvas"),c=r.getContext("2d"),r.width=n.naturalWidth,r.height=n.naturalHeight,c.drawImage(n,0,0),i=c.getImageData(a.x,a.y,a.width,a.height),r.width=a.width,r.height=a.height,c.putImageData(i,0,0),e.abrupt("return",new Promise((function(e){r.toBlob((function(t){e(t)}),"image/jpeg")})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){var t=e.imgUrl,a=e.clbkCrop,c=e.round,i=Ie(),l=Object(n.useState)({x:0,y:0}),o=Object(G.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(1),p=Object(G.a)(m,2),f=p[0],d=p[1],h=Object(n.useState)(null),g=Object(G.a)(h,2),E=g[0],b=g[1],v=Object(n.useCallback)((function(e,t){b(t)}),[]),O=function(){var e=Object(Z.a)(J.a.mark((function e(){var n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,De(t,E);case 3:n=e.sent,a(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:i.croppingToolWrapper},r.a.createElement("div",{className:i.cropWrapper},r.a.createElement(Ue.a,{image:t,crop:s,zoom:f,onCropChange:u,onCropComplete:v,onZoomChange:d,aspect:c?1:4/3,cropShape:c?"round":"rect"})),r.a.createElement(we.a,{container:!0,spacing:2,className:i.slider},r.a.createElement(we.a,{item:!0},r.a.createElement(ke.a,null)),r.a.createElement(we.a,{item:!0,xs:!0},r.a.createElement(xe.a,{value:f,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:function(e,t){return d(t)}})),r.a.createElement(we.a,{item:!0},r.a.createElement(Ce.a,null))),r.a.createElement(K.a,{variant:"contained",color:"primary",component:"span",onClick:O},"Validate image"))}var _e=a(98),Fe=a.n(_e),Te=Object(ne.a)({input:{display:"none"},imageInputWrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100vw"},imageMini:{width:"100%",marginTop:"20px"},hidden:{display:"none"},btnWrapper:{display:"flex",justifyContent:"center",alignItems:"center",width:"60%"},editBtn:{marginLeft:"20px"}});function Re(e){var t=e.clbkUpload,a=e.clbkCrop,c=e.tempUrl,i=e.tempUrlCropped,l=e.isDisabled,o=Te(),s=Object(n.useState)(!1),u=Object(G.a)(s,2),m=u[0],p=u[1];Object(n.useEffect)((function(){""!==c&&p(!0)}),[c]),Object(n.useEffect)((function(){""!==i&&p(!1)}),[i]);return r.a.createElement("div",{className:o.imageInputWrapper},r.a.createElement("input",{accept:"image/*",className:o.input,id:"contained-button-file",multiple:!0,type:"file",onChange:t,required:!0}),r.a.createElement("div",{className:o.btnWrapper},r.a.createElement("label",{htmlFor:"contained-button-file",className:l?o.hidden:void 0},r.a.createElement(K.a,{variant:"contained",color:"primary",component:"span",startIcon:r.a.createElement(Ne.a,null)},"Upload")),""!==i&&!m&&i!==c&&r.a.createElement(Fe.a,{onClick:function(){p(!0)},className:o.editBtn})),""!==i&&!m&&r.a.createElement("img",{src:i,alt:"Upload",className:o.imageMini}),m&&r.a.createElement(We,{imgUrl:c,clbkCrop:a}))}var Ae=a(99),Me=a.n(Ae),ze=a(233),Be=Object(ne.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Ve(e){var t=e.loading,a=Be(),c=r.a.useState(!1),i=Object(G.a)(c,2),l=i[0],o=i[1];return Object(n.useEffect)((function(){o(!0===t)}),[t]),r.a.createElement("div",null,r.a.createElement(ze.a,{className:a.backdrop,open:l},r.a.createElement(Q.a,{color:"inherit"})))}var qe=Object(ne.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",marginTop:"20px","& > *":{marginBottom:"10px"}},formTitle:{fontSize:"1.8em",fontWeight:"bolder"}}),He=function(e){var t=qe(),a=Object(n.useState)(""),c=Object(G.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)(""),s=Object(G.a)(o,2),u=s[0],m=s[1],p=Object(n.useState)(""),f=Object(G.a)(p,2),d=f[0],h=f[1],g=Object(n.useState)(null),E=Object(G.a)(g,2),b=E[0],O=E[1],j=Object(n.useState)(!1),w=Object(G.a)(j,2),y=w[0],k=w[1],S=e.match.params.mode,C=e.match.params.id;Object(n.useEffect)((function(){return"edit"===S&&v(C).then((function(e){l(e.url),m(e.url),h(e.description)})).catch((function(e){console.log(e.message)})),function(){k(!1)}}));var U=null!==b||"edit"===S;return r.a.createElement(r.a.Fragment,null,y&&r.a.createElement(Ve,{loading:y}),r.a.createElement("form",{className:t.root},r.a.createElement("h2",{className:t.formTitle},"upload"===S?"Upload an image":"Edit image"),r.a.createElement(Re,{tempUrl:i,tempUrlCropped:u,clbkUpload:function(e){l(URL.createObjectURL(e.target.files[0]))},clbkCrop:function(e){m(URL.createObjectURL(e)),O(e)},isDisabled:"edit"===S}),U&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rows:4,variant:"outlined",value:d,onChange:function(e){return h(e.target.value)}}),r.a.createElement(K.a,{variant:"contained",color:"primary",className:t.button,endIcon:r.a.createElement(Me.a,null),onClick:function(t){if(t.preventDefault(),k(!0),"upload"===S){var a=new FormData;a.append("description",d),a.append("image",b),N(a).then((function(t){e.history.push("/home")})).catch((function(e){console.log(e.message)}))}else"edit"===S&&x(C,{description:d}).then((function(t){e.history.push("/home")})).catch((function(e){console.log(e.message)}))}},"Validate"))))},Je=a(58),Ze=a(217),Ge=a(231),Ke=a(220),Ye=a(218),Qe=a(100),Xe=a.n(Qe),$e=a(101),et=a.n($e),tt=a(221),at=Object(ne.a)((function(e){return{input:{display:"none"},editProfileForm:{width:"80%",display:"flex",flexDirection:"column",maxWidth:"500px",marginTop:"20px","& > *":{marginBottom:"10px"}},formTitle:{alignSelf:"center",fontSize:"1.8em",fontWeight:"bolder"},imageInputWrapper:{display:"flex",alignItems:"center"},imageMini:{width:"20vw",maxWidth:"120ox",borderRadius:"50%",marginRight:"20px"},validateBtn:{width:"50%",alignSelf:"center"}}}));var nt=V((function(e){var t=e.context,a=e.history,c=at(),i=Object(n.useState)(!1),l=Object(G.a)(i,2),o=l[0],s=l[1],u=Object(n.useState)(!0),m=Object(G.a)(u,2),p=m[0],f=m[1],d=Object(n.useState)({}),h=Object(G.a)(d,2),g=h[0],E=h[1],b=Object(n.useState)(""),v=Object(G.a)(b,2),O=v[0],j=v[1],N=Object(n.useState)(""),x=Object(G.a)(N,2),w=x[0],y=x[1],S=Object(n.useState)(!1),U=Object(G.a)(S,2),I=U[0],L=U[1],D=Object(n.useState)(!1),P=Object(G.a)(D,2),W=P[0],F=P[1],T=t.user,R=t.setUser;Object(n.useEffect)((function(){return k(T._id).then((function(e){var t=e.name,a=e.description,n=e.email,r=e.profilePicture;E({name:t,description:a,email:n}),j(r),f(!1)})),function(){F(!1)}}),[]);var A=function(e){e.persist(),E((function(t){return Object(Je.a)(Object(Je.a)({},t),{},Object(_.a)({},e.target.name,e.target.value))}))},M=function(){var e=Object(Z.a)(J.a.mark((function e(t){var n,r,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t.preventDefault(),F(!0),n=new FormData,g)g[r]!==T[r]&&n.append(r,g[r]);return e.next=6,C(n);case 6:(c=e.sent).message||(R(c),a.push("/profile/".concat(T._id)));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p?r.a.createElement(Q.a,null):r.a.createElement(r.a.Fragment,null,W&&r.a.createElement(Ve,{loading:W}),r.a.createElement("form",{className:c.editProfileForm},r.a.createElement("h2",{className:c.formTitle},"Edit profile"),r.a.createElement("div",{className:c.imageInputWrapper},r.a.createElement("img",{src:O,alt:"Profile",className:c.imageMini}),r.a.createElement("input",{accept:"image/*",className:c.input,id:"contained-button-file",multiple:!0,type:"file",name:"profilePicture",onChange:function(e){y(URL.createObjectURL(e.target.files[0])),L(!0)}}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(K.a,{variant:"contained",color:"primary",component:"span",startIcon:r.a.createElement(Ne.a,null)},"Edit picture"))),I&&r.a.createElement(We,{imgUrl:w,clbkCrop:function(e){j(URL.createObjectURL(e)),E((function(t){return Object(Je.a)(Object(Je.a)({},t),{},{profilePicture:e})})),L(!1)},round:!0}),r.a.createElement(Oe.a,{required:!0,label:"Name",name:"name",onChange:A,value:g.name}),r.a.createElement(Oe.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rowsMax:4,name:"description",onChange:A,value:g.description}),r.a.createElement(Oe.a,{required:!0,label:"Email",name:"email",onChange:A,value:g.email}),r.a.createElement(Ye.a,null,r.a.createElement(Ge.a,{htmlFor:"password"},"New Password"),r.a.createElement(Ze.a,{onChange:A,name:"password",required:!0,id:"password",type:o?"text":"password",value:g.password,endAdornment:r.a.createElement(Ke.a,{position:"end"},r.a.createElement(tt.a,{"aria-label":"toggle password visibility",onClick:function(){s(!o)},onMouseDown:function(e){e.preventDefault()}},o?r.a.createElement(Xe.a,null):r.a.createElement(et.a,null)))})),r.a.createElement(K.a,{variant:"contained",color:"primary",onClick:M,className:c.validateBtn},"Validate")))})),rt=a(105),ct=(a(3),a(224)),it=a(225),lt=a(226),ot=a(228),st=a(227),ut=a(59),mt=a(104),pt=a.n(mt),ft=a(102),dt=a.n(ft),ht=a(235),gt=a(223),Et=a(219),bt=a(109),vt=a(222),Ot=a(234),jt=Object(ne.a)((function(e){return{root:{width:"100%",maxWidth:500,"& .MuiCardActions-root":{padding:0},"& .MuiCardContent-root":{paddingTop:0}},media:{height:0,paddingTop:"75%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var Nt=V((function(e){var t=e.image,a=e.context,n=e.clbkDelete,c=e.clbkLike,i=t.creator,o=t.description,s=t.url,u=jt(),m=r.a.useState(!1),p=Object(G.a)(m,2),f=(p[0],p[1],r.a.useState(!1)),d=Object(G.a)(f,2),h=d[0],g=d[1],E=r.a.useRef(null),b=function(e){E.current&&E.current.contains(e.target)||g(!1)};function v(e){"Tab"===e.key&&(e.preventDefault(),g(!1))}var O=r.a.useRef(h);r.a.useEffect((function(){!0===O.current&&!1===h&&E.current.focus(),O.current=h}),[h]);var j=function(){n(t._id)},N=r.a.createElement(r.a.Fragment,null,r.a.createElement(tt.a,{ref:E,"aria-controls":h?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){g((function(e){return!e}))}},r.a.createElement(dt.a,null)),r.a.createElement(vt.a,{open:h,anchorEl:E.current,role:void 0,transition:!0,disablePortal:!0,placement:"bottom-end"},(function(e){var a=e.TransitionProps,n=e.placement;return r.a.createElement(Et.a,Object.assign({},a,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(bt.a,null,r.a.createElement(gt.a,{onClickAway:b},r.a.createElement(Ot.a,{autoFocusItem:h,id:"menu-list-grow",onKeyDown:v},r.a.createElement(ht.a,{onClick:b},r.a.createElement(l.b,{to:"/image/edit/".concat(t._id)},"Edit")),r.a.createElement(ht.a,{onClick:j},"Delete")))))}))),x=a.user.images.includes(t._id),w=t.likes.reduce((function(e,t){return t._id==a.user._id||e}),!1),y="Liked by ";return 0!==t.likes.length&&(1===t.likes.length?y+="".concat(t.likes[0].name):2===t.likes.length?y+="".concat(t.likes[0].name," and ").concat(t.likes[1].name):y+="".concat(t.likes[0].name,", ").concat(t.likes[1].name," and ").concat(t.likes.length-2," other").concat(t.likes.length-2>1?"s":"")),r.a.createElement(ct.a,{className:u.root},r.a.createElement(it.a,{avatar:r.a.createElement(l.b,{to:"/profile/".concat(i._id)},r.a.createElement(Ee.a,{src:i.profilePicture})),action:x&&N,title:r.a.createElement(l.b,{to:"/profile/".concat(i._id)},i.name)}),r.a.createElement(lt.a,{className:u.media,image:s}),r.a.createElement(st.a,{disableSpacing:!0},r.a.createElement(tt.a,{"aria-label":"add to favorites",onClick:function(){c(t._id)}},w?r.a.createElement(pe.a,null):r.a.createElement(pt.a,null)),0!==t.likes.length&&r.a.createElement("p",null,y)),r.a.createElement(ot.a,null,r.a.createElement(ut.a,{variant:"body2",color:"textSecondary",component:"p"},o)))}));var xt=V((function(e){var t=e.match,a=e.context,c=Object(n.useState)([]),i=Object(G.a)(c,2),l=i[0],o=i[1],s=Object(n.useState)(!0),u=Object(G.a)(s,2),m=u[0],p=u[1];Object(n.useEffect)((function(){"home"===t.params.mode?O().then((function(e){o(e),p(!1)})):"profile"===t.params.mode&&j(t.params.id).then((function(e){o(e),p(!1)}))}),[t,a.user]);var f=function(){var e=Object(Z.a)(J.a.mark((function e(t){var n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:n=e.sent,a.setUser(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(Z.a)(J.a.mark((function e(t){var a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:a=e.sent,o((function(e){var n=e.findIndex((function(e){return e._id===t})),r=Object(rt.a)(e);return r[n]=a,r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m?r.a.createElement(Q.a,null):r.a.createElement(r.a.Fragment,null,l.map((function(e){return r.a.createElement(Nt,{key:e._id,image:e,clbkDelete:f,clbkLike:d})})))})),wt=Object(ne.a)((function(e){return{searchComponent:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"20px","& .MuiGrid-container":{width:"auto",alignItems:"center"}},resultDisplay:{marginTop:"15px",width:"100%",display:"flex",flexDirection:"column"},userCard:{display:"flex",alignItems:"center",marginTop:"5px",width:"100%",backgroundColor:"#fffef0",padding:"5px",fontSize:"1.7em","& i":{fontSize:"0.8em"}},profilePicture:{width:"4em",maxWidth:"100px",marginRight:"10px",borderRadius:"50%"},msg:{alignSelf:"center",fontSize:"1.5em",fontWeight:"bolder"},loader:{alignSelf:"center"}}}));var yt=V((function(e){var t=e.context,a=wt(),c=Object(n.useState)(""),i=Object(G.a)(c,2),o=i[0],s=i[1],u=Object(n.useState)([]),m=Object(G.a)(u,2),p=m[0],f=m[1],d=Object(n.useState)(!1),h=Object(G.a)(d,2),g=h[0],E=h[1];Object(n.useEffect)((function(){""!==o&&(E(!0),S(o).then((function(e){f(e),E(!1)})))}),[o]);var b=r.a.createElement("p",{className:a.msg},"No profile matches your search");return r.a.createElement("div",{className:a.searchComponent},r.a.createElement(we.a,{container:!0,alignItems:"flex-end"},r.a.createElement(we.a,{item:!0},r.a.createElement(de.a,null)),r.a.createElement(we.a,{item:!0},r.a.createElement(Oe.a,{variant:"outlined",label:"Search for a profile",onChange:function(e){s(e.target.value)}}))),r.a.createElement("section",{className:a.resultDisplay},g?r.a.createElement(Q.a,{className:a.loader}):""===o?void 0:0===p.length?b:p.map((function(e){return function(e){return r.a.createElement(l.b,{to:"/profile/".concat(e._id)},r.a.createElement(bt.a,{elevation:3,className:a.userCard},r.a.createElement("img",{src:e.profilePicture,alt:"User",className:a.profilePicture}),r.a.createElement("p",null,r.a.createElement("b",null,e.name)," ",t.user.subscriptions.includes(e._id)?r.a.createElement("i",null," \u2022 Followed"):void 0)))}(e)}))))})),kt=Object(ne.a)({title:{margin:"10px auto",fontSize:"2em",fontWeight:"bolder"},notifsContainer:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},notifWrapper:{display:"flex",width:"100%",alignItems:"center",marginBottom:"5px",backgroundColor:"#fffef0"},imgMini:{width:"5em",maxWidth:"100px",margin:"5px 10px"},notifDesc:{fontWeight:"bold"}});var St=V((function(){var e=kt(),t=Object(n.useState)([]),a=Object(G.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!0),o=Object(G.a)(l,2),s=o[0],u=o[1];return Object(n.useEffect)((function(){I().then((function(e){i(e),u(!1)}))}),[]),s?r.a.createElement(Q.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:e.title},"Notifications"),r.a.createElement("div",{className:e.notifsContainer},0===c.length?r.a.createElement("p",null,"You have no notifications yet"):c.sort((function(e,t){return a=e.createdAt,n=t.createdAt,a>n?-1:a<n?1:0;var a,n})).map((function(t){return r.a.createElement(bt.a,{key:t._id,className:e.notifWrapper},r.a.createElement("img",{src:t.image.url,alt:"Notif",className:e.imgMini}),r.a.createElement("p",{className:e.notifDesc},t.user.name," ",t.event," your picture"))}))))}));var Ct=V((function(e){var t=e.context.user;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(ie,null),r.a.createElement("main",{id:"content"},r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/",component:W}),r.a.createElement(P.b,{exact:!0,path:"/auth/signin",component:R}),r.a.createElement(P.b,{exact:!0,path:"/auth/signup",component:z}),r.a.createElement(q,{exact:!0,path:"/image/:mode(upload|edit)/:id?",component:He}),r.a.createElement(q,{exact:!0,path:"/profile/edit",component:nt}),r.a.createElement(q,{exact:!0,path:"/profile/:id",component:X}),r.a.createElement(q,{exact:!0,path:"/:mode(home|profile)/:images?/:id?",component:xt}),r.a.createElement(q,{exact:!0,path:"/search",component:yt}),r.a.createElement(q,{exact:!0,path:"/notifications",component:St}))),t&&r.a.createElement(ve,null))}));a(154);i.a.render(r.a.createElement(l.a,null,r.a.createElement(D,null,r.a.createElement(Ct,null))),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.928d3c0d.chunk.js.map