(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t,a){e.exports=a(154)},144:function(e,t,a){},149:function(e,t,a){},151:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),l=a(11),o=a(42),s=a(43),u=a(47),m=a(46),p=a(91),d=a.n(p).a.create({baseURL:"https://pics-4rt.herokuapp.com",withCredentials:!0});function f(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var h=function(e){return d.post("/api/auth/signup",e).then((function(e){return e.data})).catch(f)},g=function(e){return d.post("/api/auth/signin",e).then((function(e){return e.data})).catch(f)},E=function(){return d.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(f)},b=function(){return d.get("/api/auth/logout").then((function(e){return e.data})).catch(f)},v=function(e){return d.get("/api/images/".concat(e)).then((function(e){return e.data})).catch(f)},O=function(){return d.get("/api/images").then((function(e){return e.data})).catch(f)},j=function(e){return d.get("/api/images/profile/".concat(e)).then((function(e){return e.data})).catch(f)},N=function(e){return d.post("/api/images",e).then((function(e){return e.data})).catch(f)},w=function(e,t){return d.patch("/api/images/".concat(e),t).then((function(e){return e.data})).catch(f)},x=function(e){return d.delete("/api/images/".concat(e)).then((function(e){return e.data})).catch(f)},y=function(e){return d.patch("/api/images/like/".concat(e)).then((function(e){return e.data})).catch(f)},k=function(e){return d.get("/api/users/".concat(e)).then((function(e){return e.data})).catch(f)},S=function(e){return d.patch("/api/users",e).then((function(e){return e.data})).catch(f)},C=function(e,t){return d.patch("/api/users/follow",{connectedUserId:e,profileUserId:t}).then((function(e){return e.data})).catch(f)},U=r.a.createContext(),I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;E().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){console.log(t),e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return r.a.createElement(U.Provider,{value:e},this.props.children)}}]),a}(n.Component),L=a(15);a(144);function P(){return r.a.createElement("div",{className:"welcome-page"},r.a.createElement("div",{className:"auth-menu"},r.a.createElement(l.b,{to:"/auth/signin"},"Sign in"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement(l.b,{to:"/auth/signup"},"Sign up")),r.a.createElement("div",{className:"intro-wrapper"},r.a.createElement("h1",{className:"title"},"Pics-Art"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima, ullam?"),r.a.createElement("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Aspernatur deleniti sint facilis nesciunt sapiente non tempora odit? Libero, deleniti incidunt.")))}var D=a(35),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(D.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),g(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/home")})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:"profile-form",onSubmit:this.handleSubmit,onChange:this.handleChange},r.a.createElement("h2",{className:"form-title"},"Sign in"),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email",name:"email"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button"},"Validate"))),r.a.createElement("p",null,"Don't have an account yet ? ",r.a.createElement(l.b,{to:"/auth/signup"},"Sign up")," "))}}]),a}(n.Component);F.contextType=U;var _=Object(L.g)(F),T=function(e){return r.a.createElement("div",{className:"welcome-page"},r.a.createElement("h1",{className:"title"},"Pics-art"),r.a.createElement(_,null))},W=(a(149),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",password:""},e.handleChange=function(t){e.setState(Object(D.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),h(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/home")})).catch((function(e){console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:"profile-form",onSubmit:this.handleSubmit,onChange:this.handleChange},r.a.createElement("h2",{className:"form-title"},"Sign up"),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Name",name:"name"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-user"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email",name:"email"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button"},"Validate"))),r.a.createElement("p",null,"Already have an account ? ",r.a.createElement(l.b,{to:"/auth/signin"},"Sign in")," "))}}]),a}(n.Component));W.contextType=U;var R=Object(L.g)(W),A=function(e){return r.a.createElement("div",{className:"welcome-page"},r.a.createElement("h1",{className:"title"},"Pics-art"),r.a.createElement(R,null))},M=a(105),B=function(e){return function(t){return r.a.createElement(U.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},z=B((function(e){var t=e.component,a=e.context,n=Object(M.a)(e,["component","context"]);return a.isLoading?null:a.isLoggedIn?r.a.createElement(L.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(L.a,{to:"/signin"})})),q=a(17),V=a.n(q),H=a(31),J=a(9),Z=a(202);var K=B((function(e){var t=e.profileUser,a=e.context,n=e.clbkFollow,c=e.clbkSignOut,i=a.user,o=i.subscriptions.includes(t._id),s=r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/profile/edit"},r.a.createElement(Z.a,{variant:"contained",color:"primary"},"Edit profile")),r.a.createElement(Z.a,{variant:"outlined",color:"primary",onClick:c},"Sign out")),u=r.a.createElement(Z.a,{variant:"contained",color:"primary",onClick:function(){n()}},o?"Unfollow":"Follow");return r.a.createElement("div",{className:"user-actions"},t._id===i._id?s:u)})),G=a(206),Q=(a(151),B((function(e){var t=e.context,a=e.match,c=e.history,i=Object(n.useState)({}),o=Object(J.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(!0),p=Object(J.a)(m,2),d=p[0],f=p[1],h=t.user;Object(n.useEffect)((function(){k(a.params.id).then((function(e){u(e),f(!1)}))}),[a]);var g=function(){var e=Object(H.a)(V.a.mark((function e(){var a,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(h._id,s._id);case 2:a=e.sent,n=a.updatedConnectedUser,r=a.updatedProfileUser,u(r),t.setUser(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d?r.a.createElement(G.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"user-info"},r.a.createElement("div",{className:"user-info-header"},r.a.createElement("img",{src:s.profilePicture,alt:"Profile",className:"user-picture"}),r.a.createElement("div",{className:"info-wrapper"},r.a.createElement("h2",{className:"user-name"},s.name),r.a.createElement("div",{className:"user-figures"},r.a.createElement("p",{className:"figure"},r.a.createElement("span",null,s.images.length)," ",r.a.createElement("span",null," publications")),r.a.createElement("p",{className:"figure"},r.a.createElement("span",null,s.followers.length),r.a.createElement("span",null," followers")),r.a.createElement("p",{className:"figure"},r.a.createElement("span",null,s.subscriptions.length),r.a.createElement("span",null," subscriptions"))))),r.a.createElement("p",{className:"user-description"},s.description),r.a.createElement(K,{profileUser:s,clbkFollow:g,clbkSignOut:function(){b().then((function(e){t.removeUser(),c.push("/")})).catch((function(e){console.log(e)}))}})),r.a.createElement("section",{className:"user-images"},s.images.map((function(e){return r.a.createElement(l.b,{to:"/profile/images/".concat(a.params.id),key:e._id},r.a.createElement("img",{src:e.url,alt:"Publication",className:"publication"}))}))))}))),X=a(210),Y=a(211),$=a(208),ee=a(209),te=a(207),ae=Object(te.a)({root:{backgroundColor:"rgb(132, 210, 255)","& .title":{fontSize:"4em",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},"& .chat-link":{fontSize:"2.5em",position:"absolute",right:"2%",top:"50%",transform:"translate(-50%, -50%)"},heightSizing:{height:"7vh"}}});function ne(e){var t=e.children,a=e.window,n=Object($.a)({target:a?a():void 0});return r.a.createElement(ee.a,{appear:!1,direction:"down",in:!n},t)}function re(e){var t=ae();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,e,r.a.createElement(X.a,{className:t.root},r.a.createElement(Y.a,null,r.a.createElement("h1",{className:"title"},"Pics-art"),r.a.createElement(l.b,{to:"/chat",className:"chat-link"},r.a.createElement("i",{className:"fas fa-paper-plane"}))))),r.a.createElement(Y.a,null))}var ce=a(212),ie=a(213),le=a(92),oe=a.n(le),se=a(65),ue=a.n(se),me=a(93),pe=a.n(me),de=a(94),fe=a.n(de),he=a(228),ge=Object(te.a)({root:{position:"sticky",bottom:0,left:0,width:"100%",backgroundColor:"rgb(132, 210, 255)","& .MuiBottomNavigationAction-root":{color:"white",minWidth:40},"& a:hover":{color:"white"}},profilePic:{borderRadius:"50%",width:"1.5em",height:"1.5em"}});var Ee=Object(L.g)(B((function(e){var t=e.context,a=e.location,c=t.user,i=a.pathname,o=ge(),s=r.a.useState(""),u=Object(J.a)(s,2),m=u[0],p=u[1];return Object(n.useEffect)((function(){"/home"===i?p("home"):"/search"===i?p("search"):"/image/upload"===i?p("upload"):"/notifications"===i?p("activities"):i==="/profile/".concat(c._id)||"/profile/edit"===i?p("profile"):p("")}),[i]),r.a.createElement(ce.a,{value:m,onChange:function(e,t){p(t)},className:o.root},r.a.createElement(ie.a,{label:"Home",value:"home",icon:r.a.createElement(l.b,{to:"/home"},r.a.createElement(oe.a,null))}),r.a.createElement(ie.a,{label:"Search",value:"search",icon:r.a.createElement(pe.a,null)}),r.a.createElement(ie.a,{label:"Upload",value:"upload",icon:r.a.createElement(l.b,{to:"/image/upload"},r.a.createElement(fe.a,null))}),r.a.createElement(ie.a,{label:"Activities",value:"activities",icon:r.a.createElement(ue.a,null)}),r.a.createElement(ie.a,{label:"Profile",value:"profile",icon:r.a.createElement(l.b,{to:"/profile/".concat(c._id)},r.a.createElement(he.a,{alt:"Profil",src:c.profilePicture,className:o.profilePic}))}))}))),be=a(227),ve=a(68),Oe=a.n(ve),je=a(230),Ne=a(214),we=a(95),xe=a.n(we),ye=a(96),ke=a.n(ye),Se=a(106),Ce=Object(te.a)({croppingToolWrapper:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"20px"},cropWrapper:{position:"relative",width:"100vw",height:0,paddingTop:"75%"},slider:{width:"50%",alignItems:"center"}}),Ue=function(e){return new Promise((function(t,a){var n=new Image;n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(e){return a(e)})),n.setAttribute("crossOrigin","anonymous"),n.src=e}))};function Ie(e,t){return Le.apply(this,arguments)}function Le(){return(Le=Object(H.a)(V.a.mark((function e(t,a){var n,r,c,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t);case 2:return n=e.sent,r=document.createElement("canvas"),c=r.getContext("2d"),r.width=n.naturalWidth,r.height=n.naturalHeight,c.drawImage(n,0,0),i=c.getImageData(a.x,a.y,a.width,a.height),r.width=a.width,r.height=a.height,c.putImageData(i,0,0),e.abrupt("return",new Promise((function(e){r.toBlob((function(t){e(t)}),"image/jpeg")})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){var t=e.imgUrl,a=e.clbkCrop,c=e.round,i=Ce(),l=Object(n.useState)({x:0,y:0}),o=Object(J.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(1),p=Object(J.a)(m,2),d=p[0],f=p[1],h=Object(n.useState)(null),g=Object(J.a)(h,2),E=g[0],b=g[1],v=Object(n.useCallback)((function(e,t){b(t)}),[]),O=function(){var e=Object(H.a)(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie(t,E);case 3:n=e.sent,a(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:i.croppingToolWrapper},r.a.createElement("div",{className:i.cropWrapper},r.a.createElement(Se.a,{image:t,crop:s,zoom:d,onCropChange:u,onCropComplete:v,onZoomChange:f,aspect:c?1:4/3,cropShape:c?"round":"rect"})),r.a.createElement(Ne.a,{container:!0,spacing:2,className:i.slider},r.a.createElement(Ne.a,{item:!0},r.a.createElement(xe.a,null)),r.a.createElement(Ne.a,{item:!0,xs:!0},r.a.createElement(je.a,{value:d,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:function(e,t){return f(t)}})),r.a.createElement(Ne.a,{item:!0},r.a.createElement(ke.a,null))),r.a.createElement(Z.a,{variant:"contained",color:"primary",component:"span",onClick:O},"Validate image"))}var De=a(97),Fe=a.n(De),_e=Object(te.a)({input:{display:"none"},imageInputWrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100vw"},imageMini:{width:"100%",marginTop:"20px"},hidden:{display:"none"},btnWrapper:{display:"flex",justifyContent:"center",alignItems:"center",width:"60%"},editBtn:{marginLeft:"20px"}});function Te(e){var t=e.clbkUpload,a=e.clbkCrop,c=e.tempUrl,i=e.tempUrlCropped,l=e.isDisabled,o=_e(),s=Object(n.useState)(!1),u=Object(J.a)(s,2),m=u[0],p=u[1];Object(n.useEffect)((function(){""!==c&&p(!0)}),[c]),Object(n.useEffect)((function(){""!==i&&p(!1)}),[i]);return r.a.createElement("div",{className:o.imageInputWrapper},r.a.createElement("input",{accept:"image/*",className:o.input,id:"contained-button-file",multiple:!0,type:"file",onChange:t,required:!0}),r.a.createElement("div",{className:o.btnWrapper},r.a.createElement("label",{htmlFor:"contained-button-file",className:(l&&o.hidden,o.uploadBtn)},r.a.createElement(Z.a,{variant:"contained",color:"primary",component:"span",startIcon:r.a.createElement(Oe.a,null)},"Upload")),""!==i&&!m&&i!==c&&r.a.createElement(Fe.a,{onClick:function(){p(!0)},className:o.editBtn})),""!==i&&!m&&r.a.createElement("img",{src:i,alt:"Upload",className:o.imageMini}),m&&r.a.createElement(Pe,{imgUrl:c,clbkCrop:a}))}var We=a(98),Re=a.n(We),Ae=a(231),Me=Object(te.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Be(e){var t=e.loading,a=Me(),c=r.a.useState(!1),i=Object(J.a)(c,2),l=i[0],o=i[1];return Object(n.useEffect)((function(){o(!0===t)}),[t]),r.a.createElement("div",null,r.a.createElement(Ae.a,{className:a.backdrop,open:l},r.a.createElement(G.a,{color:"inherit"})))}var ze=Object(te.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",marginTop:"20px","& > *":{marginBottom:"10px"}},formTitle:{fontSize:"1.8em",fontWeight:"bolder"}}),qe=function(e){var t=ze(),a=Object(n.useState)(""),c=Object(J.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)(""),s=Object(J.a)(o,2),u=s[0],m=s[1],p=Object(n.useState)(""),d=Object(J.a)(p,2),f=d[0],h=d[1],g=Object(n.useState)(null),E=Object(J.a)(g,2),b=E[0],O=E[1],j=Object(n.useState)(!1),x=Object(J.a)(j,2),y=x[0],k=x[1],S=e.match.params.mode,C=e.match.params.id;Object(n.useEffect)((function(){return"edit"===S&&v(C).then((function(e){l(e.url),m(e.url),h(e.description)})).catch((function(e){console.log(e.message)})),function(){k(!1)}}),[]);return r.a.createElement(r.a.Fragment,null,y&&r.a.createElement(Be,{loading:y}),r.a.createElement("form",{className:t.root},r.a.createElement("h2",{className:t.formTitle},"upload"===S?"Upload an image":"Edit image"),r.a.createElement(Te,{tempUrl:i,tempUrlCropped:u,clbkUpload:function(e){l(URL.createObjectURL(e.target.files[0]))},clbkCrop:function(e){m(URL.createObjectURL(e)),O(e)},isDisabled:"edit"===S}),null!==b&&r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rows:4,variant:"outlined",value:f,onChange:function(e){return h(e.target.value)}}),r.a.createElement(Z.a,{variant:"contained",color:"primary",className:t.button,endIcon:r.a.createElement(Re.a,null),onClick:function(t){if(t.preventDefault(),k(!0),"upload"===S){var a=new FormData;a.append("description",f),a.append("image",b),N(a).then((function(t){e.history.push("/home")})).catch((function(e){console.log(e.message)}))}else"edit"===S&&w(C,{description:f}).then((function(t){e.history.push("/home")})).catch((function(e){console.log(e.message)}))}},"Send"))))},Ve=a(56),He=a(215),Je=a(229),Ze=a(218),Ke=a(216),Ge=a(99),Qe=a.n(Ge),Xe=a(100),Ye=a.n(Xe),$e=a(219),et=Object(te.a)((function(e){return{input:{display:"none"},editProfileForm:{width:"80%",display:"flex",flexDirection:"column",maxWidth:"500px",marginTop:"20px","& > *":{marginBottom:"10px"}},formTitle:{alignSelf:"center",fontSize:"1.8em",fontWeight:"bolder"},imageInputWrapper:{display:"flex",alignItems:"center"},imageMini:{width:"20vw",maxWidth:"120ox",borderRadius:"50%",marginRight:"20px"},validateBtn:{width:"50%",alignSelf:"center"}}}));var tt=B((function(e){var t=e.context,a=e.history,c=et(),i=Object(n.useState)(!1),l=Object(J.a)(i,2),o=l[0],s=l[1],u=Object(n.useState)(!0),m=Object(J.a)(u,2),p=m[0],d=m[1],f=Object(n.useState)({}),h=Object(J.a)(f,2),g=h[0],E=h[1],b=Object(n.useState)(""),v=Object(J.a)(b,2),O=v[0],j=v[1],N=Object(n.useState)(""),w=Object(J.a)(N,2),x=w[0],y=w[1],C=Object(n.useState)(!1),U=Object(J.a)(C,2),I=U[0],L=U[1],P=Object(n.useState)(!1),F=Object(J.a)(P,2),_=F[0],T=F[1],W=t.user,R=t.setUser;Object(n.useEffect)((function(){return k(W._id).then((function(e){var t=e.name,a=e.description,n=e.email,r=e.profilePicture;E({name:t,description:a,email:n}),j(r),d(!1)})),function(){T(!1)}}),[]);var A=function(e){e.persist(),E((function(t){return Object(Ve.a)(Object(Ve.a)({},t),{},Object(D.a)({},e.target.name,e.target.value))}))},M=function(){var e=Object(H.a)(V.a.mark((function e(t){var n,r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t.preventDefault(),T(!0),n=new FormData,g)g[r]!==W[r]&&n.append(r,g[r]);return e.next=6,S(n);case 6:(c=e.sent).message||(R(c),a.push("/profile/".concat(W._id)));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p?r.a.createElement(G.a,null):r.a.createElement(r.a.Fragment,null,_&&r.a.createElement(Be,{loading:_}),r.a.createElement("form",{className:c.editProfileForm},r.a.createElement("h2",{className:c.formTitle},"Edit profile"),r.a.createElement("div",{className:c.imageInputWrapper},r.a.createElement("img",{src:O,alt:"Profile",className:c.imageMini}),r.a.createElement("input",{accept:"image/*",className:c.input,id:"contained-button-file",multiple:!0,type:"file",name:"profilePicture",onChange:function(e){y(URL.createObjectURL(e.target.files[0])),L(!0)}}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(Z.a,{variant:"contained",color:"primary",component:"span",startIcon:r.a.createElement(Oe.a,null)},"Edit picture"))),I&&r.a.createElement(Pe,{imgUrl:x,clbkCrop:function(e){j(URL.createObjectURL(e)),E((function(t){return Object(Ve.a)(Object(Ve.a)({},t),{},{profilePicture:e})})),L(!1)},round:!0}),r.a.createElement(be.a,{required:!0,label:"Name",name:"name",onChange:A,value:g.name}),r.a.createElement(be.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rowsMax:4,name:"description",onChange:A,value:g.description}),r.a.createElement(be.a,{required:!0,label:"Email",name:"email",onChange:A,value:g.email}),r.a.createElement(Ke.a,null,r.a.createElement(Je.a,{htmlFor:"password"},"New Password"),r.a.createElement(He.a,{onChange:A,name:"password",required:!0,id:"password",type:o?"text":"password",value:g.password,endAdornment:r.a.createElement(Ze.a,{position:"end"},r.a.createElement($e.a,{"aria-label":"toggle password visibility",onClick:function(){s(!o)},onMouseDown:function(e){e.preventDefault()}},o?r.a.createElement(Qe.a,null):r.a.createElement(Ye.a,null)))})),r.a.createElement(Z.a,{variant:"contained",color:"primary",onClick:M,className:c.validateBtn},"Validate")))})),at=a(104),nt=(a(3),a(222)),rt=a(223),ct=a(224),it=a(226),lt=a(225),ot=a(57),st=a(103),ut=a.n(st),mt=a(101),pt=a.n(mt),dt=a(233),ft=a(221),ht=a(217),gt=a(108),Et=a(220),bt=a(232),vt=Object(te.a)((function(e){return{root:{width:"100%",maxWidth:500,"& .MuiCardActions-root":{padding:0},"& .MuiCardContent-root":{paddingTop:0}},media:{height:0,paddingTop:"75%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var Ot=B((function(e){var t=e.image,a=e.context,n=e.clbkDelete,c=e.clbkLike,i=t.creator,o=t.description,s=t.url,u=vt(),m=r.a.useState(!1),p=Object(J.a)(m,2),d=(p[0],p[1],r.a.useState(!1)),f=Object(J.a)(d,2),h=f[0],g=f[1],E=r.a.useRef(null),b=function(e){E.current&&E.current.contains(e.target)||g(!1)};function v(e){"Tab"===e.key&&(e.preventDefault(),g(!1))}var O=r.a.useRef(h);r.a.useEffect((function(){!0===O.current&&!1===h&&E.current.focus(),O.current=h}),[h]);var j=function(){n(t._id)},N=r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{ref:E,"aria-controls":h?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){g((function(e){return!e}))}},r.a.createElement(pt.a,null)),r.a.createElement(Et.a,{open:h,anchorEl:E.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var a=e.TransitionProps,n=e.placement;return r.a.createElement(ht.a,Object.assign({},a,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(gt.a,null,r.a.createElement(ft.a,{onClickAway:b},r.a.createElement(bt.a,{autoFocusItem:h,id:"menu-list-grow",onKeyDown:v},r.a.createElement(dt.a,{onClick:b},r.a.createElement(l.b,{to:"/image/edit/".concat(t._id)},"Edit")),r.a.createElement(dt.a,{onClick:j},"Delete")))))}))),w=a.user.images.includes(t._id),x=t.likes.includes(a.user._id);return r.a.createElement(nt.a,{className:u.root},r.a.createElement(rt.a,{avatar:r.a.createElement(l.b,{to:"/profile/".concat(i._id)},r.a.createElement(he.a,{src:i.profilePicture})),action:w&&N,title:r.a.createElement(l.b,{to:"/profile/".concat(i._id)},i.name)}),r.a.createElement(ct.a,{className:u.media,image:s}),r.a.createElement(lt.a,{disableSpacing:!0},r.a.createElement($e.a,{"aria-label":"add to favorites",onClick:function(){c(t._id)}},x?r.a.createElement(ue.a,null):r.a.createElement(ut.a,null))),r.a.createElement(it.a,null,r.a.createElement(ot.a,{variant:"body2",color:"textSecondary",component:"p"},o)))}));var jt=B((function(e){var t=e.match,a=e.context,c=Object(n.useState)([]),i=Object(J.a)(c,2),l=i[0],o=i[1],s=Object(n.useState)(!0),u=Object(J.a)(s,2),m=u[0],p=u[1];Object(n.useEffect)((function(){"home"===t.params.mode?O().then((function(e){o(e),p(!1)})):"profile"===t.params.mode&&j(t.params.id).then((function(e){o(e),p(!1)}))}),[t,a.user]);var d=function(){var e=Object(H.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:n=e.sent,a.setUser(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(H.a)(V.a.mark((function e(t){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:a=e.sent,o((function(e){var n=e.findIndex((function(e){return e._id===t})),r=Object(at.a)(e);return r[n]=a,r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m?r.a.createElement(G.a,null):r.a.createElement(r.a.Fragment,null,l.map((function(e){return r.a.createElement(Ot,{key:e._id,image:e,clbkDelete:d,clbkLike:f})})))}));var Nt=B((function(e){var t=e.context.user;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(re,null),r.a.createElement("main",{id:"content"},r.a.createElement(L.d,null,r.a.createElement(L.b,{exact:!0,path:"/",component:P}),r.a.createElement(L.b,{exact:!0,path:"/auth/signin",component:T}),r.a.createElement(L.b,{exact:!0,path:"/auth/signup",component:A}),r.a.createElement(z,{exact:!0,path:"/image/:mode(upload|edit)/:id?",component:qe}),r.a.createElement(z,{exact:!0,path:"/profile/edit",component:tt}),r.a.createElement(z,{exact:!0,path:"/profile/:id",component:Q}),r.a.createElement(z,{exact:!0,path:"/:mode(home|profile)/:images?/:id?",component:jt}))),t&&r.a.createElement(Ee,null))}));a(153);i.a.render(r.a.createElement(l.a,null,r.a.createElement(I,null,r.a.createElement(Nt,null))),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.e7372427.chunk.js.map